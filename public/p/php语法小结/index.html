<!DOCTYPE html>
<html lang="en" dir=" auto">

<head><meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="robots" content="index, follow">
<title>PHP语法小结 | Archai&#39;s home</title>
<meta name="keywords" content="PHP" />
<meta name="description" content="基本语法 输出语句    语句 功能     echo 输出字符串类型   print_r 输出引用类型(对象,数组等)   var_dunp 检测变量类型    ::: tip echo语句可用于给前端返回响应体。比如前端通过ajax请求，可以在xhr.response中直接得到echo的内容 :::
变量&amp;常量 👉🏼 变量
   语句 功能 返回值     isset() 检测变量是否存在 boolean   unset() 删除某个变量 none    👉🏼 常量
常量用const 或 define 定义，常量名一般全部大写，不受作用域的限制
::: tip
一般是define在类外定义常量，const在类内定义常量，并且const必须通过类名::变量名来进行访问。但是php5.3以上支持类外通过const定义常量。
:::
:::danger
const不能在条件语句中使用，必出错
:::
 参考文章 《PHP中define() 与 const定义常量的区别详解》">
<meta name="author" content="Archai">
<link rel="canonical" href="https://www.fintinger.site/p/php%E8%AF%AD%E6%B3%95%E5%B0%8F%E7%BB%93/" />
<link crossorigin="anonymous" href="/assets/css/stylesheet.min.8beadb01ac86b014d0fb007604cc7da4cedc8da4d3dface8f39450c73b8f5b10.css" integrity="sha256-i&#43;rbAayGsBTQ&#43;wB2BMx9pM7cjaTT36zo85RQxzuPWxA=" rel="preload stylesheet" as="style">
<link rel="icon" href="https://www.fintinger.site/images/favicon.ico">
<link rel="icon" type="image/png" sizes="16x16" href="https://www.fintinger.site/images/favicon.ico">
<link rel="icon" type="image/png" sizes="32x32" href="https://www.fintinger.site/images/favicon.ico">
<link rel="apple-touch-icon" href="https://www.fintinger.site/apple-touch-icon.png">
<link rel="mask-icon" href="https://www.fintinger.site/safari-pinned-tab.svg">
<meta name="theme-color" content="#2e2e33">
<meta name="msapplication-TileColor" content="#2e2e33">
<noscript>
    <style>
        #theme-toggle,
        .top-link {
            display: none;
        }

    </style>
</noscript><script>
    if(window.screen.width<=640&&window.location.pathname=="/"){
            window.location.pathname="posts"
    }
</script><meta property="og:title" content="PHP语法小结" />
<meta property="og:description" content="基本语法 输出语句    语句 功能     echo 输出字符串类型   print_r 输出引用类型(对象,数组等)   var_dunp 检测变量类型    ::: tip echo语句可用于给前端返回响应体。比如前端通过ajax请求，可以在xhr.response中直接得到echo的内容 :::
变量&amp;常量 👉🏼 变量
   语句 功能 返回值     isset() 检测变量是否存在 boolean   unset() 删除某个变量 none    👉🏼 常量
常量用const 或 define 定义，常量名一般全部大写，不受作用域的限制
::: tip
一般是define在类外定义常量，const在类内定义常量，并且const必须通过类名::变量名来进行访问。但是php5.3以上支持类外通过const定义常量。
:::
:::danger
const不能在条件语句中使用，必出错
:::
 参考文章 《PHP中define() 与 const定义常量的区别详解》" />
<meta property="og:type" content="article" />
<meta property="og:url" content="https://www.fintinger.site/p/php%E8%AF%AD%E6%B3%95%E5%B0%8F%E7%BB%93/" /><meta property="article:section" content="posts" />
<meta property="article:published_time" content="2020-10-14T00:00:00&#43;00:00" />
<meta property="article:modified_time" content="2020-10-14T00:00:00&#43;00:00" /><meta property="og:site_name" content="Archai&#39;s home" />

<meta name="twitter:card" content="summary"/>
<meta name="twitter:title" content="PHP语法小结"/>
<meta name="twitter:description" content="基本语法 输出语句    语句 功能     echo 输出字符串类型   print_r 输出引用类型(对象,数组等)   var_dunp 检测变量类型    ::: tip echo语句可用于给前端返回响应体。比如前端通过ajax请求，可以在xhr.response中直接得到echo的内容 :::
变量&amp;常量 👉🏼 变量
   语句 功能 返回值     isset() 检测变量是否存在 boolean   unset() 删除某个变量 none    👉🏼 常量
常量用const 或 define 定义，常量名一般全部大写，不受作用域的限制
::: tip
一般是define在类外定义常量，const在类内定义常量，并且const必须通过类名::变量名来进行访问。但是php5.3以上支持类外通过const定义常量。
:::
:::danger
const不能在条件语句中使用，必出错
:::
 参考文章 《PHP中define() 与 const定义常量的区别详解》"/>


<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [, 
    {
      "@type": "ListItem",
      "position":  2 ,
      "name": "Posts",
      "item": "https://www.fintinger.site/posts/"
    }, 
    {
      "@type": "ListItem",
      "position":  3 ,
      "name": "PHP语法小结",
      "item": "https://www.fintinger.site/p/php%E8%AF%AD%E6%B3%95%E5%B0%8F%E7%BB%93/"
    }
  ]
}
</script>
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "BlogPosting",
  "headline": "PHP语法小结",
  "name": "PHP语法小结",
  "description": "基本语法 输出语句    语句 功能     echo 输出字符串类型   print_r 输出引用类型(对象,数组等)   var_dunp 检测变量类型    ::: tip echo语句可用于给前端返回响应体。比如前端通过ajax请求，可以在xhr.response中直接得到echo的内容 :::\n变量\u0026amp;常量 👉🏼 变量\n   语句 功能 返回值     isset() 检测变量是否存在 boolean   unset() 删除某个变量 none    👉🏼 常量\n常量用const 或 define 定义，常量名一般全部大写，不受作用域的限制\n::: tip\n一般是define在类外定义常量，const在类内定义常量，并且const必须通过类名::变量名来进行访问。但是php5.3以上支持类外通过const定义常量。\n:::\n:::danger\nconst不能在条件语句中使用，必出错\n:::\n 参考文章 《PHP中define() 与 const定义常量的区别详解》",
  "keywords": [
    "PHP"
  ],
  "articleBody": "基本语法 输出语句    语句 功能     echo 输出字符串类型   print_r 输出引用类型(对象,数组等)   var_dunp 检测变量类型    ::: tip echo语句可用于给前端返回响应体。比如前端通过ajax请求，可以在xhr.response中直接得到echo的内容 :::\n变量\u0026常量 👉🏼 变量\n   语句 功能 返回值     isset() 检测变量是否存在 boolean   unset() 删除某个变量 none    👉🏼 常量\n常量用const 或 define 定义，常量名一般全部大写，不受作用域的限制\n::: tip\n一般是define在类外定义常量，const在类内定义常量，并且const必须通过类名::变量名来进行访问。但是php5.3以上支持类外通过const定义常量。\n:::\n:::danger\nconst不能在条件语句中使用，必出错\n:::\n 参考文章 《PHP中define() 与 const定义常量的区别详解》\n 三元表达式及@使用 省略写法\n1  echo $name?:'NO';//输出本身的话，可以省略！   ??的作用\n①检测变量是否定义(isset) ②检测变量是否为空(is_null)\n1  echo $name??'NO';//NO   @用来屏蔽错误\n1  @(9/0)//不会报错   字符串相关函数 定界符 以开头，用相同字符串定义开头\u0026结尾。\n::: details\n1 2 3 4 5 6 7 8 9  $temp=tem h1 style=\"color: #e01\"这是一段临时HTML模板h1 h5 style=\"color: #00b3ff\"hhch5 script document.querySelector(\"h5\").addEventListener(\"mouseenter\",function (){ this.style.color=\"#000\"; }) script tem;   :::\n字符串连接 .符号用来连接字符串\n::: details\n1 2  $str=\"fer.com\"; echo $str.\"=\".\"hhhhc\";   :::\n字符串长度    方法 参数 作用     strlen()  [$str] 获得字符串长度，中文一个字两个字符！   mb_strlen() [$str,encoding] 指定编码格式获取长度，指定为utf8，中文一个字一个字符    字符串格式    方法 作用     trim() 去空格   strtoupper()\u0026strtolower 大小写转换   ucfirst() 指定一段字符串首字母大写   ucwords($sentence,delimiters) 以delimiters为分割，首字母大写    ::: details\n1 2 3  $sentence=\"my name is jqf.let's go shopping!\"; echo \"\"; echo ucwords($sentence,'.');//My name is jqf.Let's go shopping!   :::\n与数组相互转化 explode(delimiter,$str) \u0026 implode(glue,$arr)\n截取字符串 substr($str,start,len) \u0026 mb_substr($str,start,len,encoding)，返回截取的字符串，原字符串不会发生改变\nmd5加密 ::: theorem MD5 MD5信息摘要算法（英语：MD5 Message-Digest Algorithm），一种被广泛使用的密码散列函数，可以产生出一个128位（16字节）的散列值（hash value），用于确保信息传输完整一致。\n::: right 来自百度百科 :::\n引入模块    方法 说明     include \u0026 include_once 弱引用，如果引入的文件不存在则会warning(可以用@屏蔽掉)，但后续代码仍然执行   require \u0026 require_once 强引用，所引文件不存在则会报fatal mistake,后续不再执行    ::: tip\ninclude_once \u0026 require_once用来避免引入多次某个模块而造成的错误，具体如下\n:::\n::: details\n1 2 3 4 5  //tools.php php function show(){ return 'https://www.fintinger.xyz'; }   1 2 3 4  //1.php php include 'tools.php'; echo show();   1 2 3  //2.php include_once \"1.php\"; include_once \"tools.php\";   2.php中引入了两次tools.php，通过include_once可以避免产生错误\n:::\n函数相关 点语法 类似于javascript，可以在函数传参数的时候实现\"聚合\"的效果\n::: details\n1 2 3 4 5 6 7  php function sum(...$nums){ print_r($nums); echo \"\"; echo array_sum($nums); } sum(1,2,3,4,4,5,6,6,7,7,7,7);   :::\n传址\u0026传值 \u0026 用来传址\n严格模式 declare(strict_types=1);声明严格模式，严格模式下，如果约束了函数参数的类型，传入不是约束的值，会报错。\n1 2 3 4 5 6  declare(strict_types=1); function sum(int ...$nums){ return array_sum($nums); } echo sum(1,2,3,4,'5');//Fatal error   php标准的函数 1 2 3 4  function show(int $var): string { return 'hhc'; }//参数(php5)和返回值(php7)都有明确的类型约束   好用的变量函数！ 1 2 3 4 5  $action=\"fn\"; function fn(){ //do something } $action()//即可调用fn函数   具体应用 ：根据图片后缀设定对应处理函数\n::: details\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  function png() { return 'png fn running...'; } function jpg() { return 'ipg fn running...'; } $file = 'logo.png'; $action = explode('.', $file)[1]; echo function_exists($action) ? $action() : '无法处理这种格式的图片！';   :::\n数组相关 指针读取数组 current($arr)\u0026next($arr) 操作数组指针，如果读取不到，current则为0\nlist() list — 把数组中的值赋给一组变量。\n1 2 3 4 5  $info = array('coffee', 'brown', 'caffeine'); // 列出所有变量 list($drink, $color, $power) = $info; echo \"$drinkis $colorand $powermakes it special.\\n\";   ::: tip\n在 PHP 7.1.0 之前的版本，list() 仅能用于数字索引的数组，并假定数字索引从 0 开始。\n:::\n也就是说 PHP7.1.0，list可以用来解构key=value型数组了\n::: details\n1 2 3 4 5 6  $arr=[ \"age\"=\"18\", \"name\"=\"fin\", ]; list(\"name\"=$name,\"age\"=$age)=$arr; echo $name;//fin   关于PHP中类似于ES6的对象解构赋值操作，有种更加稳妥方便的方式，那就是extract()\n1 2 3 4 5 6  $arr=[ \"age\"=\"18\", \"name\"=\"fin\", ]; extract($arr, EXTR_PREFIX_SAME, \"wddx\");//重复则覆盖，前缀为\"wddx\" echo $name;//fin   :::\n::: warning\nPHP 5 里，list() 从最右边的参数开始赋值； PHP 7 里，list() 从最左边的参数开始赋值。\n如果你用单纯的变量，不用担心这一点。 但是如果你用了具有索引的数组，通常你期望得到的结果和在 list() 中写的一样是从左到右的，但在 PHP 5 里实际上不是， 它是以相反顺序赋值的。\n通常而言，不建议依赖于操作的顺序，在未来可能会再次发生修改。\n:::\n操作数组 foreach()遍历数组\n1 2 3  foreach($arr $index=$item){ //可以获取索引和数组中的item }   传址修改原数组\n1 2 3  foreach ($arr as \u0026$item){ //do something(修改传址进来的数组元素) }   数组增删操作     增 删     从末尾 array_push array_pop   从开始位置 array_unshift array_shift    其他方法（类似JS中） 1 2 3 4 5 6 7 8 9 10 11 12 13 14  /*遍历*/ array_map() array_values() array_keys() array_filter() /*判断*/ array_key_exists() in_array() /*合并*/ array_merge()//[originArr,newArr] array_change_key_case() //修改key的大小写小:0/CASE_LOWER 大:1/CASE_UPPER   ::: details\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35  //递归实现多维数组key的大小写转换 php $config = [ \"hOst\" = \"localhost\", \"POST\" = 8000, \"uSeR\" = \"admin\", \"cache\" = [ \"hOst\" = \"127.0.0.1\", \"user\" = [ \"namE\" = \"jqf\", \"token\" = \"qq9ad2437c622bdd38\" ] ] ]; /** * @param array $arr * @param string $type * @return array */ function fin_array_change_key_case(array $arr, string $type = 'CASE_UPPER'): array { $action = $type == \"CASE_UPPER\" ? 'strtoupper' : 'strtolower'; foreach ($arr as $k = $v) { //删掉原先的  unset($arr[$k]); //新的数组  $arr[$action($k)] = is_array($v) ? fin_array_change_key_case($v) : $v; } return $arr; } $res = fin_array_change_key_case($config); print_r($res);   :::\n::: tip\narray_walk_recursive($arr,function (\u0026$v,\u0026$k,$case){}，专门用于递归遍历多维数组，注意其中自动传入址\n:::\n时间相关 基本操作 设置时区\n1  date_default_timezone_set(timezone_identifier)   注： timezone_identifier取值有\"PRC\"，“Asia/chongqing “，“Asia/shanghai”，“Asia/urumqi\"等，分别对应时区\n格式化时间\n1  date('Y-m-d hⓜ️s');   时间戳\n1 2  time() microtime(true)//true 返回浮点数 false 返回字符串   ::: details\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40  php //得到函数执行时间的函数 /**测试函数执行时间 * @param null $begin * @param null $end * @return array|float|mixed|string */ function runtime($begin = null, $end = null) { static $cache = []; if (is_null($begin)) { return $cache; } elseif (is_null($end)) { return $cache[$begin] = microtime(true); } else { //👇🏼！！！！  $end = $cache[$end] ?? microtime(true); return round($end - $cache[$begin],2); } } //测试for和while循环 $LEN=10000000; //1.for runtime('for'); for ($i = 0; $i  $LEN; $i++) {} runtime('forEnd'); echo 'for循环:'.runtime('for', 'forEnd'); echo \"\"; //2.while runtime('while'); $i=0; while ($i$LEN){$i++;}; runtime('whileEnd'); echo 'while循环:'.runtime('while', 'whileEnd'); echo \"\"; echo '总执行时间:'.runtime('for','whileEnd');   :::\n一些相关函数 1 2 3 4 5 6 7 8 9  php //date() =填参数得到不同的结果 //getdate() =返回数组  /*转为时间戳*/ //具体查手册 //strtotime() =参数为str,比如\"NOW\",\"2020-04-02 10:00:00\"... //strtotime('+1 year +10 day')=1年10天后 //strtotime('next friday')=下个星期五   内置时间类 Date()对象\n1 2 3 4 5 6 7  php //new Date()-format()//%m月%d天%h小时,一共%a天 //new Date()-setdate() //new Date()-diff() 获取俩时间差值 //...    DateInterval()对象\n1 2 3  //参数'P2DT2H5M'=增加2d2h5m //P-开始, D-'day', T-分割日期和时间 //配合new Date-add($interval)函数使用！！！   正则表达式 相关函数\n1 2 3 4 5 6 7 8  php //preg_match(reg,str,res) =匹配一个 //preg_match_all()=所有  //preg_split(reg,str)=拆分字符串，返回处理后结果  //preg_replace(reg,val_replace,str)=替换 //preg_replace_callback(reg,fn,str)=fn中接收$matches实现复杂逻辑   ::: warning\n注意字符串操作函数的区别,str_split 等\n:::\nCOOKIE cookie是客户端存储数据的手段，并在请求服务器时自动携带cookie数据。\n::: tip\nCOOKIE 保存在浏览器\n:::\n设置 ⚡ setcookie()\n参数:\n   参数 说明     name Cookie的名称   value cookie的价值。该值存储在客户端计算机上; 不要存储敏感信息   expires Cookie过期的时间。这是一个Unix时间戳，可以使用time（）函数加上希望它到期之前的秒数来设置它。   path 服务器上可以使用cookie的路径。如果设置为*“/”*，则cookie将在整个范围内可用   domain cookie可用的域。（例如*“www.houdunren.com”*）将使cookie可用于该子域及其所有其他子域（即w2.www.houdunren.com）。要使cookie可用于整个域（包括其所有子域），只需将值设置为域名（在本例中为*“houdunren.com”*）   secure 表示cookie应仅通过客户端的安全HTTPS连接传输   httponly 当TRUEcookie只能通过HTTP协议访问时。这意味着脚本语言（例如JavaScript）无法访问cookie。    来源: 后盾人教程\nSESSION 概述 session是服务器会话状态，可用于记录访问用户后台会话数据。不同用户或一个用户用不同浏览器在同一网站发起php请求会产生不同的session，然后保存在本地文件夹(session.save_path)或者其它端。\n::: tip\n与COOKIE不同，SESSION保存在本地\n:::\n保存的session在同一域下都可以通过$_SESSION访问到，为数组形式。\n基本使用 1 2 3  session_start();//开始 $_SESSION[\"web\"] = \"https://www.fintinger.xyz\";//设置数据 print_r($_SESSION);//可以通过超全局数组获取   配置 SESSION储存目录 1  session_save_path(\"./temp\");//查看或设置   自定义Name\u0026Value 1 2 3 4  //id一般在自定义session引擎的时候设置 session_name(\"jqf\"); session_id(\"123\"); session_start();//配置在开始之前   GC垃圾回收机制  如果使用默认的SESSION处理引擎，修改php.ini的配置即可\n 过期时间 session.gc_maxlifetime 设置文件过期时间，默认为1440s = 24min。\n::: tip\n如果(下面讲到的概率)调用这个函数，就会遍历保存SESSION的文件夹，判断如果本次产生SESSION与上次产生相差超过24min就会删除上次产生的SESSION，更新为本次保存的SESSION($session_id不会改变，即文件名)。\n:::\n调用概率  如果每次调用php，都回去保存SESSOIN的文件夹遍历，进行垃圾回收(GC)，当用户量很多时，就会很大程度上影响性能，因此加入了概率这一概念，即每次调用php时，启动垃圾回收程序的概率session.gc_probability/session.gc_divisor\n 👉 session.gc_probability 基率\nsession清除无效session的基率。\n👉 session.gc_divisor \n启动垃圾回收程序的概率。概率计算公式为：session.gc_probability / session.gc_divisor，如果网站访问量大建议将概率降低如 1 / 1000 ~ 5000。\n自定义SESSION处理引擎 使用 ::: warning\n在start之前设置，session_set_save_handle(new FileHandle)括号中为自定义的处理类\n:::\n然后按照正常session处理使用即可！\n定义 🎈 使用 SessionHandlerInterface 接口(implements)\n1  class FileHandle inplements SessionlandlerInterface{}   🎈标准模板\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55  php class FileHandle implements SessionHandlerInterface { /** * @inheritDoc */ public function close() { // TODO: Implement close() method.  } /** * @inheritDoc */ public function destroy($session_id) { // TODO: Implement destroy() method.  } /** * @inheritDoc */ public function gc($maxlifetime) { // TODO: Implement gc() method.  } /** * @inheritDoc */ public function open($save_path, $name) { // TODO: Implement open() method.  } /** * @inheritDoc */ public function read($session_id) { // TODO: Implement read() method.  } /** * @inheritDoc */ public function write($session_id, $session_data) { // TODO: Implement write() method.  } }   逐一实现其中方法即可！\n实例 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 58 59 60 61 62 63 64 65 66 67 68 69  php /** * Class FileHandle * @param $path //session储存路径 * @param $maxlifetime //session文件过期时间 */ class FileHandle implements SessionHandlerInterface { protected $path; protected $maxlifetime; public function __construct($path = \"session\", $maxlifetime = \"1440\") { $this-path = $this-mkdir($path); $this-maxlifetime = $maxlifetime; } private function mkdir($path) { is_dir($path) || mkdir($path); return realpath($path); } public function close(): bool { return true; } public function destroy($session_id): bool { if (is_file($this-path.\"/\".$session_id)) { @unlink($this-path.\"/\".$session_id); } return true; } public function gc($maxlifetime): bool { foreach (glob($this-path.\"/*\") as $file) { if (filemtime($file) + $this-maxlifetime  time()) { @unlink($file); } } return true; } public function open($path, $name): bool { return true; } public function read($session_id): string { return (string)@file_get_contents($this-path.\"/\".$session_id); } public function write($session_id, $session_data): bool { return (bool)@file_put_contents($this-path.\"/\".$session_id, $session_data); } }   注意：\n⚡ 处理的路径要为绝对路径才行，可以利用realpath($path)得到\n⚡ 实现的方法就是，“开，关，读，写，卸，垃”，本方法中\"开，关\"没有做过多的处理\nWhat’t more💭 在write方法中添加延迟sleep()，并且修改php.ini 中的调用概率为1(session.gc_divisor =1)，即每次都调用垃圾回收，就可以看到session是在删除之后再被重新创建的！\n文件操作 指针操作函数 fseek($handle,int offset) =移动文件中指针\nfread($handle,length) =读取文件操作，指针会自动移动到length位置\n::: tip\n$handle 为source 类型，通过fopen()函数获得\n:::\n文件打开与写入操作fopen函数详解： fopen($path,mode) ,mode的取值如下\n   模式 功能 +模式 二进制文件 文件不存在 文件存在     r 读取文件不可写 r+可写入文件 r+b 操作二进制文件 创建 操作   w 从头写入，不可读 w+可读取文件 w+b.. 创建 操作   a 追加内容不可读取 a+可读取 a+b 创建 操作   x 从头写入，不可读 x+可读 x+b 创建 不会打开，fopen返回false，产生一个警告    ::: warning\n操作二进制文件(图片等，需要设置头信息)，比如:header('Content-type:image/jpg');\n:::\n其他操作函数 读取操作\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19  php $handle=fopen(\"file/test.txt\",'r'); //feof($handle)=文件读取是否完毕 //while (!feof($handle)){ // echo fread($handle,1); //}  //fgetc($handle)=每次读取一个字符！ while (!feof($handle)){ echo fgetc($handle); } //fgets($handle)= 每次一行！  //fgetss($handle)=v7.3弃用， //fgetcsv($handle,split)=读取，并指定用什么分割开来   权限判断，检查文件\n1 2 3 4 5 6 7  //文件\u0026目录权限 //is_writable() //is_readable()  //文件\u0026目录检查 //file_exists() //is_file()\u0026is_dir()   快速读取\u0026写入文件 file_get_contents(filename|url) 获取文件内容\nfile_put_contents(filename,data) =w模式写入\nfile_put_contents(filename,data,FILE_APPEND) =a模式写入\n文件复制移动 文件复制\ncopy($source,$dest)\n文件移动\nrename($oldname,$newname)\n注： rename() 同时具有重命名和移动文件的功能\n目录操作函数 👉 is_dir()\n用途： 判断是否存在该目录\n👉 mkdir($pathname,mode,recursive)\n参数：\n[1] $pathname 路径\n[2] mode 默认0777,意味着最大可能的访问权，一般设定为0755\n::: warning\nmode在windows 下被忽略\n:::\nrecursive 是否递归创建，\n1  mkdir(\"a/b/c\",0755,true)   👉 readdir()\n说明： 调用一次就读取一个当前目录下的文件或文件夹，读取不到则返回false\n注意： readdir 方法会读取到”.” 和 “..“这两个默认存在的目录\n👉 scandir()\n说明： 相当于循环readdir()\n👉 glob()\n说明： 目录的遍历操作\n参数：\n[1] pattern 模式\n1 2 3  glob(\"./*\")//当前路径下所有 glob(\"./*.php\")//当前路径下的php文件 glob(\"{./*.php,*.txt}\")//当前路径下php和txt   [2] flag\n1 2 3 4  //GLOB_MARK =后面补 \"/\" //GLOB_NOSORT =使用系统默认排序 //GLOB_ERR =没有权限操作目录时，停止所有动作（默认跳过） //GLOB_NOCHECK =目录不存在，返回模式   共享锁和独占锁  flock($handle,$operation) 函数用来给文件上锁\n    $operation 名称 作用     LOCK_SH 共享锁 如果是读取，不需要等待，但如果是写入，需要等待读取完成。   LOCK_EX 独占锁 无论写入/读取都需要等待。   LOCK_UN 释放锁 无论使用共享/读占锁，使用完后需要解锁。   LOCK_NB  当被锁定时，不阻塞，而是提示锁定    ::: warning\nwindows不支持$operation = LOCN_NB ，也不支持flock的第四个参数,具体GO\n:::\n 情景1 用户u1正在读取文件，u2的写入操作等到u1读取完毕之后(产生阻塞)才能再进行\n 1 2 3 4 5 6 7  //u1.php $handle=fopen(\"jqf.txt\",\"r\"); flock($handle,LOCK_SH); sleep(3);//模拟写入操作的延时 echo fread($handle,99); flock($handle,LOCK_UN); fclose($handle);   1 2 3 4 5 6 7 8  //u2.php $handle = fopen(\"jqf.txt\", \"a+\"); flock($handle, LOCK_EX); fwrite($handle, '*hm'); fseek($handle, 0); echo fread($handle, 99); flock($handle,LOCK_UN); fclose($handle);    情景2 u1写完之后（产生阻塞）u2才能读取\n 1 2 3 4 5 6 7 8 9  //u1.php $handle = fopen('jqf.txt', 'a+'); flock($handle, LOCK_EX); sleep(3); fwrite($handle, '*hm'); fseek($handle, 0); echo fread($handle, 99); flock($handle, LOCK_UN); fclose($handle);   1 2 3 4 5 6  //u2.php $handle=fopen('jqf.txt','r+'); flock($handle,LOCK_SH); echo fread($handle,99); flock($handle,LOCK_UN); fclose($handle);   关于文件和目录操作常用的一些函数 [1] 格式化获取磁盘大小以及磁盘可用大小\n::: details\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20  /**格式化获取磁盘空间大小 * 注意数组的顺序，判断由大到小!!!! * @param int $total * @return string */ function space_total(int $total):string { $config=[3='GB',2='MB',1='KB']; foreach ($config as $num=$unit) { if ($totalpow(1024,$num)){ return round($total/pow(1024,$num)).$unit; } } return $total.'B'; } echo \"\"; echo '磁盘总大小：'.space_total(disk_total_space('.')); echo \"\"; echo '剩余大小：'.space_total(disk_free_space('.'));   :::\n[2]利用filetime实现缓存机制\n::: details\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  /** * 如果刷新页面前后不超过10s，将会一直走缓存,否则会更新缓存 * ob_start()\u0026ob_get_contents()可以在引入时获取引入内容 */ $CACHE = 'file/文件缓存/file.cache.php'; $BLADE = 'file/文件缓存/file.blade.php'; if (is_file($CACHE) \u0026\u0026 filemtime($CACHE)  time() - 10) { echo 'is cache...'; include $CACHE; } else { ob_start(); include $BLADE; $content = ob_get_contents(); file_put_contents($CACHE, $content); }   :::\n[3] 利用var_export()快速生成配置文件\n::: tip\nvar_export 类似于 var_dump，当其第二个参数为TRUE时，会返回一个变量，而不是输出它\n:::\n::: details\n1 2 3 4 5 6  php $db = [\"host\" = \"localhost\", \"port\" = 2000, \"pwd\" = \"admin888\"]; //不带true会输出符合php语法的数组 $config = var_export($db, true); file_put_contents('file/var_export_config.php', \". $config . \";\");   :::\n[4] 统计目录大小\n::: details\n1 2 3 4 5 6 7 8 9 10 11 12  /**统计目录大小 * @param string $dir * @return int */ function dir_size(string $dir = \".\"): int { $size = 0; foreach (glob($dir . \"/*\") as $file) { $size += is_file($file)?filesize($file):dir_size($file); } return $size; }   :::\n[5] 递归复制整体目录\n:::details\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16  /**递归复制整体目录 * @param string $from * @param string $to * @return bool */ function copy_dir(string $from, string $to): bool { !is_dir($to) \u0026\u0026 mkdir($to, 0755, true); foreach (glob($from . \"/*\") as $file) { $target = $to . \"/\" . basename($file); is_file($file) ? copy($file, $target) : copy_dir($file, $target); }; return true; }   :::\n[6] 删除多级目录\n::: danger\n目录的删除操作一定要小心！避免目录层级错误导致的误删\n:::\n::: details\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15  /**删除多级目录 * 千万小心！！！ * @param string $dir * @return bool */ function del_dir(string $dir) { if (!is_dir($dir)) { return true; } foreach (glob($dir . \"/*\") as $file) { is_file($file) ? unlink($file) : del_dir($file); } return rmdir($dir); }   :::\n::: tip\n目录的移动 等价于复制+删除\n:::\n命名空间  在电脑的文件系统中，fin.txt这个文件在一个文件夹下不能同时存在两份，只能另建文件夹将二者分开，这就类似命名空间的概念，利用命名空间可以将类，函数或者常量的同名者分隔开来，避免产生冲突\n 几个关键字 1. namespace 用namespace关键字声明一个类的命名空间，如果当做文件系统来看就是讲文件放到某个确定的位置，可以通过层级的文件夹路径找到。\n::: tip\n标准规范就是，类的命名空间与其所处文件夹名对应\n:::\n::: danger\nnamespace之前的代码都不会执行！\n:::\n2.use use关键字导入声明了命名空间的类等，所有支持命名空间的PHP版本支持三种别名或导入方式：为类名称使用别名、为接口使用别名或为命名空间名称使用别名。PHP 5.6开始允许导入函数或常量或者为它们设置别名。\n具体方法：\n::: details\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  namespace foo; use My\\Full\\Classname as Another; // 下面的例子与 use My\\Full\\NSname as NSname 相同 use My\\Full\\NSname; // 导入一个全局类 use ArrayObject; // importing a function (PHP 5.6+) use function My\\Full\\functionName; // aliasing a function (PHP 5.6+) use function My\\Full\\functionName as func; // importing a constant (PHP 5.6+) use const My\\Full\\CONSTANT;   :::\n3.自动加载 ::: tip\n如果两个类定义在不同的php文件中，使用use声明命名空间或者类之后，还需要用include/require引入进来，略微有点麻烦，我们希望有种自动处理的方法，使得我们只需要使用use声明，而include自动完成！\n:::\n方法1 函数实现\nspl_autoload_register() 函数当使用use声明的命名空间类不存在时，会，自动调用该函数\n1 2 3 4 5 6 7 8 9 10 11 12  php namespace App; spl_autoload_register( function ($name) { $file = str_replace(\"\\\\\", \"/\", $name).\".php\"; require $file; } ); use App\\Module\\Shop\\Server\\Member; Member::show();   方法2 面向对象形式\n::: warning\n自动加载类需要与使用者在同一命名空间下，或者使用use\u0026include正确引入\n:::\n1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17  //Autoload.php类 namespace App; class Autoload { public static function boot() { spl_autoload_register([new self, \"autoload\"]);//注意传参方式  } public function autoload($name) { $file = str_replace(\"\\\\\", \"/\", $name).\".php\"; require $file; } } Autoload::boot();//自动调用静态方法，引入之后不需调用   1 2 3 4 5 6  //use.php namespace App; include \"Autoload.php\"; use App\\Module\\Shop\\Server\\Member; Member::show();   方法3 第三方工具—composer\n初始化\n1  composer init   修改配置\n1 2 3 4 5  \"autoload\":{ \"psr-4\":{ \"App\\\\\":\"App\" } }   构建\n1  conposer build   然后引入生成的vendor文件夹下的autoload.php即可！\n面向对象  使用类的方式实现某一功能，通过继承让代码变得更易维护\n 类中的量\u0026方法 静态变量\u0026方法 1 2 3 4 5 6 7 8 9  class User{ protected static $name=\"fin\"; public static function show(){ return self::$name;//self 关键字表示当前对象，  } } $u=new User(); echo $u-show(); echo User::show();   静态方法/属性通过类名::方法/属性的方式调用\n常量 1 2 3 4 5 6 7  class Model { const EXISTS_VALUE=1; } echo Model::EXISTS_VALUE; $m=new Model(); echo $m::EXISTS_VALUE;     常量名规范上全部大写\n  常量永远不会被改变\n  private\u0026protect的区别 主要区别在继承上：\n protect定义的方法，继承后能在子类中直接访问 private只供当前对象使用，继承后的子类无法访问  构造函数与解析函数(魔术方法) 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18  class Test { public function __construct() { echo \"__construct\"; } public function __destruct() { echo \"__destruct\"; } /* public function __run() { echo \"__run\"; }*/ } new Test();   说明：\n 两者都会在new对象的时候自动执行 名称不可以自定义 前者一般用来赋值操作，后者做一些资源的释放等  继承\u0026特殊类 单链式继承  用到extends关键字\n 🎈防止继承后子类覆盖父类方法\n1 2 3 4 5 6 7 8 9  class Father{ private static $name=\"jqf\"; public final function show(){ return Father::$name; } } class Child extends Father{ // public function show(){}//Cannot override final method }   利用final关键字定义父类中的方法，就可以避免父类方法被重写\n多继承  用trait 关键字定义类，用use引入\n 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27  php trait Commit { public function publish() { return __METHOD__; } } trait Log { public function show() { return __METHOD__; } } class Topic { use Commit, Log; } $topic = new Topic; echo $topic-publish(); echo \"\"; echo $topic-show();   🎈 多继承后的优先级\n当继承后方法名重复时，优先级为:子类方法  trait  extend\n🎈 多继承方法名冲突问题\n1 2 3 4 5  //类中方法名冲突，通过替换+改名解决 use Commit, Log{ Commit::show insteadof Log;//设置优先级  Log::show as export;//优先级低的改名 }   设置优先级→优先级低的改名\n🎈 重新定义父类方法的访问权限\n1 2 3  use Commit{ Commit::publish as protected; }   protect与public之间相互转换\n特殊类    特殊类 使用 说明     抽象类 abstract 子类必须实现其中声明的抽象方法   接口 interface 类似一个标准,凡是通过 implements 关键字使用该接口的类，必须实现其中的所有方法   特征类 trait 定义类用于多继承    魔术方法  魔术方法定义在父类当中，由子类触发\n 属性相关    方法 调用条件     __get($name) 获取对象中的不可访问或不存在的变量时会自动调用   __set($name,$value) 给对象设置不可访问值会自动调用   __unset($name) 删除对象中的不可访问或不存在变量会调用   __isset($name) 判断对象中是否存在某变量调用    方法相关    方法 调用条件     __call($name, $arguments) 子类实例化调用的方法在子类中不存在时   __callStatic($name,$arguments) 子类静态方法不存在时    特殊    方法 调用条件     __construct() new 即调用   __destruct() new 即调用   __toString 直接输出对象引用，不会产生错误，自动调用该方法,输出该方法中返回的字符串    错误\u0026异常处理 错误  通过error_reporting(0)屏蔽系统默认的所有错误处理，然后通过set_error_handler设置自定义错误处理函数，第一个参数为函数，第二个为要处理的错误，默认为处理所有错误(E_ALL | E_STRICT),[官网]\n 错误处理函数的参数    参数 是否可选(Y/N) 作用     $errcode N 是一个 integer，包含了错误的级别(错误码)   $errmsg N 是一个string，包含了错误的信息   $errfile Y 是一个string，包含了发生错误的文件名   $errline Y 是一个 integer，包含了错误发生的行号     然后通过error_log函数选择将错误相关的信息发送到某个地方\n 1  error_log ( string $message [, int $message_type = 0 [, string $destination [, string $extra_headers ]]] ) : bool      message_type 操作     0 message 发送到 PHP 的系统日志，使用 操作系统的日志机制或者一个文件，取决于 error_log 指令设置了什么。 这是个默认的选项。   1 message 发送到参数 destination 设置的邮件地址。 第四个参数 extra_headers 只有在这个类型里才会被用到。   2 不再是一个选项。   3 message 被发送到位置为 destination 的文件里。 字符 message 不会默认被当做新的一行。   4 message 直接发送到 SAPI 的日志处理程序中。    异常  异常处理不同于错误，异常必须是使用throw 抛出异常，然后才能被try catch 捕获\n 自定义异常的处理 依赖方法 👉 set_exception_handler [官网]\n 设置用户自定义的异常处理函数\n 1 2 3 4 5 6 7 8 9 10 11  //范例 php function exception_handler($exception) { echo \"Uncaught exception: \" , $exception-getMessage(), \"\\n\"; } set_exception_handler('exception_handler'); throw new Exception('Uncaught Exception'); echo \"Not Executed\\n\"; ?  在exception_handler可以接收到产生异常后的异常处理类，如果没有自定义异常处理类，默认为Exception类\n基本思路  自定义继承自Exception的异常处理的类，让其中默认存在render() 处理函数(用来区分默认的异常处理类Exception)\n  定义异常监测类，其作用为执行set_exception_handler，然后在其设置的exception_handler函数中做判断：🎈如果该函数接受的参数(异常处理类)中存在render()函数，则该异常由自定义的异常处理类抛出，调用该异常处理类的render() 函数即可；🎈如果不存在render()函数，说明该异常没有自定义的异常处理类(是通过throw new Exceprtion() 抛出的异常)，再做处理即可；\n  然后定义具体逻辑，在具体位置判断需要抛出哪种异常即可。\n 本例实现思路  本例主要实现两个模块，视图渲染+表单验证\n ⚔ 视图渲染  主要作用是加载位于Views文件夹下的每个页面\n 主要逻辑\n 在入口文件index.php中引入定义在bootstrap.php 中的composer自动加载功能(使用use引入类，会自动调用include)，以及异常监测类。其中，异常检测类中的set_exception_handler自动执行\n  然后使用Server\\View视图渲染类的make方法加载Views 下的index.blade.php文件。存在，则通过include引入，如果不存在会抛出ViewException异常\n  一旦抛出ViewException异常，就会通过View类的make方法加载error.blade.php，这个文件一定是要存在的\n ⚔ 表单验证  提交表单到后台，通过验证类判断是否能通过验证，不能通过则携带着提示信息返回表单页面，能通过则加载成功的页面\n 主要逻辑\n 视图渲染模块无异常后会转到index.blade.php页面，其中含有展示在前端的表单，提交至controller.php\n  controller.php 也需要引入bootstrap.php ，然后通过表单验证类Server\\ValidateException进行验证。无异常执行下一句，即通过View 类加载成功页面success.blade.php.否则：\n  表单验证类Server\\ValidateException.php中判断$_POST的内容，本例只判断是否为空，如果为空抛出表单验证异常ValidateException，controller.php中的后续不再执行\n  一旦抛出ValidateException表单验证异常，会将ValidateException.php中抛出异常时的消息存到SESSION中，然后通过header(\"location:index.php\")返回入口文件路径，即重新开始输入表单。在表单中可以把存放在SESSION中的异常消息展示给用户作为提示。\n ",
  "wordCount" : "2611",
  "inLanguage": "en",
  "datePublished": "2020-10-14T00:00:00Z",
  "dateModified": "2020-10-14T00:00:00Z",
  "author":{
    "@type": "Person",
    "name": "Archai"
  },
  "mainEntityOfPage": {
    "@type": "WebPage",
    "@id": "https://www.fintinger.site/p/php%E8%AF%AD%E6%B3%95%E5%B0%8F%E7%BB%93/"
  },
  "publisher": {
    "@type": "Organization",
    "name": "Archai's home",
    "logo": {
      "@type": "ImageObject",
      "url": "https://www.fintinger.site/images/favicon.ico"
    }
  }
}
</script>
</head>

<body class="" id=" top">


<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.css" integrity="sha384-zB1R0rpPzHqg7Kpt0Aljp8JPLqbXI3bhnPWROx27a9N0Ll6ZP/+DiW/UqRcLbRjq" crossorigin="anonymous">
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/katex.min.js" integrity="sha384-y23I5Q6l+B6vatafAwxRu/0oK/79VlbSz7Q9aiSZUvyWYIYsd+qj+o24G5ZU2zJz" crossorigin="anonymous"></script>
<script defer src="https://cdn.jsdelivr.net/npm/katex@0.11.1/dist/contrib/auto-render.min.js" integrity="sha384-kWPLUVMOks5AQFrykwIup5lo0m3iMkkHrD0uJ4H5cjeGihAutqP0yW0J6dpFiVkI" crossorigin="anonymous" onload="renderMathInElement(document.body);"></script>
<script>
        document.addEventListener("DOMContentLoaded", function() {
        renderMathInElement(document.body, {
          
          
          delimiters: [
              {left: '$$', right: '$$', display: true},
              {left: '$', right: '$', display: false},
              {left: '\\(', right: '\\)', display: false},
              {left: '\\[', right: '\\]', display: true}
          ],
          
          throwOnError : false
        });
    });
</script>

<header class="header">
    <nav class="nav">
        <div class="logo">
            <a href="https://www.fintinger.site" accesskey="h" title="🛖Home (Alt + H)">🛖Home</a>
            <span class="logo-switches">
            </span>
        </div>
        <ul id="menu">
            <li>
                <a href="https://www.fintinger.site/posts/" title="Posts📑">
                    <span>Posts📑</span>
                </a>
            </li>
            <li>
                <a href="https://www.fintinger.site/categories/" title="Categories🛒">
                    <span>Categories🛒</span>
                </a>
            </li>
            <li>
                <a href="https://www.fintinger.site/search/" title="Search🔎 (Alt &#43; /)" accesskey=/>
                    <span>Search🔎</span>
                </a>
            </li>
            <li>
                <a href="https://www.fintinger.site/archives/" title="Timeline🕰️">
                    <span>Timeline🕰️</span>
                </a>
            </li>
            <li>
                <a href="https://www.fintinger.site/about/" title="About🥳">
                    <span>About🥳</span>
                </a>
            </li>
        </ul>
    </nav>
</header>
<main class="main">

<article class="post-single">
  <header class="post-header">
    <div class="breadcrumbs"><a href="https://www.fintinger.site">Home</a>&nbsp;»&nbsp;<a href="https://www.fintinger.site/posts/">Posts</a></div>
    <h1 class="post-title">
      PHP语法小结
    </h1>
    <div class="post-meta"><span title='2020-10-14 00:00:00 +0000 UTC'>October 14, 2020</span>&nbsp;·&nbsp;13 min&nbsp;·&nbsp;Archai

</div>
  </header> <div class="toc">
    <details >
        <summary accesskey="c" title="(Alt + C)">
            <span class="details">Table of Contents</span>
        </summary>

        <div class="inner"><ul>
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e8%af%ad%e6%b3%95" aria-label="基本语法">基本语法</a><ul>
                        
                <li>
                    <a href="#%e8%be%93%e5%87%ba%e8%af%ad%e5%8f%a5" aria-label="输出语句">输出语句</a></li>
                <li>
                    <a href="#%e5%8f%98%e9%87%8f%e5%b8%b8%e9%87%8f" aria-label="变量&amp;amp;常量">变量&amp;常量</a></li>
                <li>
                    <a href="#%e4%b8%89%e5%85%83%e8%a1%a8%e8%be%be%e5%bc%8f%e5%8f%8a%e4%bd%bf%e7%94%a8" aria-label="三元表达式及@使用">三元表达式及@使用</a></li>
                <li>
                    <a href="#%e5%ad%97%e7%ac%a6%e4%b8%b2%e7%9b%b8%e5%85%b3%e5%87%bd%e6%95%b0" aria-label="字符串相关函数">字符串相关函数</a><ul>
                        
                <li>
                    <a href="#%e5%ae%9a%e7%95%8c%e7%ac%a6" aria-label="定界符">定界符</a></li>
                <li>
                    <a href="#%e5%ad%97%e7%ac%a6%e4%b8%b2%e8%bf%9e%e6%8e%a5" aria-label="字符串连接">字符串连接</a></li>
                <li>
                    <a href="#%e5%ad%97%e7%ac%a6%e4%b8%b2%e9%95%bf%e5%ba%a6" aria-label="字符串长度">字符串长度</a></li>
                <li>
                    <a href="#%e5%ad%97%e7%ac%a6%e4%b8%b2%e6%a0%bc%e5%bc%8f" aria-label="字符串格式">字符串格式</a></li>
                <li>
                    <a href="#%e4%b8%8e%e6%95%b0%e7%bb%84%e7%9b%b8%e4%ba%92%e8%bd%ac%e5%8c%96" aria-label="与数组相互转化">与数组相互转化</a></li>
                <li>
                    <a href="#%e6%88%aa%e5%8f%96%e5%ad%97%e7%ac%a6%e4%b8%b2" aria-label="截取字符串">截取字符串</a></li>
                <li>
                    <a href="#md5%e5%8a%a0%e5%af%86" aria-label="md5加密">md5加密</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%bc%95%e5%85%a5%e6%a8%a1%e5%9d%97" aria-label="引入模块">引入模块</a></li>
                <li>
                    <a href="#%e5%87%bd%e6%95%b0%e7%9b%b8%e5%85%b3" aria-label="函数相关">函数相关</a><ul>
                        
                <li>
                    <a href="#%e7%82%b9%e8%af%ad%e6%b3%95" aria-label="点语法">点语法</a></li>
                <li>
                    <a href="#%e4%bc%a0%e5%9d%80%e4%bc%a0%e5%80%bc" aria-label="传址&amp;amp;传值">传址&amp;传值</a></li>
                <li>
                    <a href="#%e4%b8%a5%e6%a0%bc%e6%a8%a1%e5%bc%8f" aria-label="严格模式">严格模式</a></li>
                <li>
                    <a href="#php%e6%a0%87%e5%87%86%e7%9a%84%e5%87%bd%e6%95%b0" aria-label="php标准的函数">php标准的函数</a></li>
                <li>
                    <a href="#%e5%a5%bd%e7%94%a8%e7%9a%84%e5%8f%98%e9%87%8f%e5%87%bd%e6%95%b0" aria-label="好用的变量函数！">好用的变量函数！</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%95%b0%e7%bb%84%e7%9b%b8%e5%85%b3" aria-label="数组相关">数组相关</a><ul>
                        
                <li>
                    <a href="#%e6%8c%87%e9%92%88%e8%af%bb%e5%8f%96%e6%95%b0%e7%bb%84" aria-label="指针读取数组">指针读取数组</a></li>
                <li>
                    <a href="#list" aria-label="list()">list()</a></li>
                <li>
                    <a href="#%e6%93%8d%e4%bd%9c%e6%95%b0%e7%bb%84" aria-label="操作数组">操作数组</a></li>
                <li>
                    <a href="#%e6%95%b0%e7%bb%84%e5%a2%9e%e5%88%a0%e6%93%8d%e4%bd%9c" aria-label="数组增删操作">数组增删操作</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96%e6%96%b9%e6%b3%95%e7%b1%bb%e4%bc%bcjs%e4%b8%ad" aria-label="其他方法（类似JS中）">其他方法（类似JS中）</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%97%b6%e9%97%b4%e7%9b%b8%e5%85%b3" aria-label="时间相关">时间相关</a><ul>
                        
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e6%93%8d%e4%bd%9c" aria-label="基本操作">基本操作</a></li>
                <li>
                    <a href="#%e4%b8%80%e4%ba%9b%e7%9b%b8%e5%85%b3%e5%87%bd%e6%95%b0" aria-label="一些相关函数">一些相关函数</a></li>
                <li>
                    <a href="#%e5%86%85%e7%bd%ae%e6%97%b6%e9%97%b4%e7%b1%bb" aria-label="内置时间类">内置时间类</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%ad%a3%e5%88%99%e8%a1%a8%e8%be%be%e5%bc%8f" aria-label="正则表达式">正则表达式</a></li></ul>
                </li>
                <li>
                    <a href="#cookie" aria-label="COOKIE">COOKIE</a><ul>
                        
                <li>
                    <a href="#%e8%ae%be%e7%bd%ae" aria-label="设置">设置</a></li></ul>
                </li>
                <li>
                    <a href="#session" aria-label="SESSION">SESSION</a><ul>
                        
                <li>
                    <a href="#%e6%a6%82%e8%bf%b0" aria-label="概述">概述</a></li>
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e4%bd%bf%e7%94%a8" aria-label="基本使用">基本使用</a></li>
                <li>
                    <a href="#%e9%85%8d%e7%bd%ae" aria-label="配置">配置</a><ul>
                        
                <li>
                    <a href="#session%e5%82%a8%e5%ad%98%e7%9b%ae%e5%bd%95" aria-label="SESSION储存目录">SESSION储存目录</a></li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89namevalue" aria-label="自定义Name&amp;amp;Value">自定义Name&amp;Value</a></li></ul>
                </li>
                <li>
                    <a href="#gc%e5%9e%83%e5%9c%be%e5%9b%9e%e6%94%b6%e6%9c%ba%e5%88%b6" aria-label="GC垃圾回收机制">GC垃圾回收机制</a><ul>
                        
                <li>
                    <a href="#%e8%bf%87%e6%9c%9f%e6%97%b6%e9%97%b4" aria-label="过期时间">过期时间</a></li>
                <li>
                    <a href="#%e8%b0%83%e7%94%a8%e6%a6%82%e7%8e%87" aria-label="调用概率">调用概率</a></li></ul>
                </li>
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89session%e5%a4%84%e7%90%86%e5%bc%95%e6%93%8e" aria-label="自定义SESSION处理引擎">自定义SESSION处理引擎</a><ul>
                        
                <li>
                    <a href="#%e4%bd%bf%e7%94%a8" aria-label="使用">使用</a></li>
                <li>
                    <a href="#%e5%ae%9a%e4%b9%89" aria-label="定义">定义</a></li>
                <li>
                    <a href="#%e5%ae%9e%e4%be%8b" aria-label="实例">实例</a></li>
                <li>
                    <a href="#whatt-more" aria-label="What&amp;rsquo;t more💭">What&rsquo;t more💭</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e6%96%87%e4%bb%b6%e6%93%8d%e4%bd%9c" aria-label="文件操作">文件操作</a><ul>
                        
                <li>
                    <a href="#%e6%8c%87%e9%92%88%e6%93%8d%e4%bd%9c%e5%87%bd%e6%95%b0" aria-label="指针操作函数">指针操作函数</a></li>
                <li>
                    <a href="#%e6%96%87%e4%bb%b6%e6%89%93%e5%bc%80%e4%b8%8e%e5%86%99%e5%85%a5%e6%93%8d%e4%bd%9cfopen%e5%87%bd%e6%95%b0%e8%af%a6%e8%a7%a3" aria-label="文件打开与写入操作fopen函数详解：">文件打开与写入操作fopen函数详解：</a></li>
                <li>
                    <a href="#%e5%85%b6%e4%bb%96%e6%93%8d%e4%bd%9c%e5%87%bd%e6%95%b0" aria-label="其他操作函数">其他操作函数</a></li>
                <li>
                    <a href="#%e5%bf%ab%e9%80%9f%e8%af%bb%e5%8f%96%e5%86%99%e5%85%a5%e6%96%87%e4%bb%b6" aria-label="快速读取&amp;amp;写入文件">快速读取&amp;写入文件</a></li>
                <li>
                    <a href="#%e6%96%87%e4%bb%b6%e5%a4%8d%e5%88%b6%e7%a7%bb%e5%8a%a8" aria-label="文件复制移动">文件复制移动</a></li>
                <li>
                    <a href="#%e7%9b%ae%e5%bd%95%e6%93%8d%e4%bd%9c%e5%87%bd%e6%95%b0" aria-label="目录操作函数">目录操作函数</a></li>
                <li>
                    <a href="#%e5%85%b1%e4%ba%ab%e9%94%81%e5%92%8c%e7%8b%ac%e5%8d%a0%e9%94%81" aria-label="共享锁和独占锁">共享锁和独占锁</a></li>
                <li>
                    <a href="#%e5%85%b3%e4%ba%8e%e6%96%87%e4%bb%b6%e5%92%8c%e7%9b%ae%e5%bd%95%e6%93%8d%e4%bd%9c%e5%b8%b8%e7%94%a8%e7%9a%84%e4%b8%80%e4%ba%9b%e5%87%bd%e6%95%b0" aria-label="关于文件和目录操作常用的一些函数">关于文件和目录操作常用的一些函数</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%91%bd%e5%90%8d%e7%a9%ba%e9%97%b4" aria-label="命名空间">命名空间</a><ul>
                        
                <li>
                    <a href="#%e5%87%a0%e4%b8%aa%e5%85%b3%e9%94%ae%e5%ad%97" aria-label="几个关键字">几个关键字</a><ul>
                        
                <li>
                    <a href="#1-namespace" aria-label="1. namespace">1. namespace</a></li>
                <li>
                    <a href="#2use" aria-label="2.use">2.use</a></li>
                <li>
                    <a href="#3%e8%87%aa%e5%8a%a8%e5%8a%a0%e8%bd%bd" aria-label="3.自动加载">3.自动加载</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e9%9d%a2%e5%90%91%e5%af%b9%e8%b1%a1" aria-label="面向对象">面向对象</a><ul>
                        
                <li>
                    <a href="#%e7%b1%bb%e4%b8%ad%e7%9a%84%e9%87%8f%e6%96%b9%e6%b3%95" aria-label="类中的量&amp;amp;方法">类中的量&amp;方法</a><ul>
                        
                <li>
                    <a href="#%e9%9d%99%e6%80%81%e5%8f%98%e9%87%8f%e6%96%b9%e6%b3%95" aria-label="静态变量&amp;amp;方法">静态变量&amp;方法</a></li>
                <li>
                    <a href="#%e5%b8%b8%e9%87%8f" aria-label="常量">常量</a></li>
                <li>
                    <a href="#privateprotect%e7%9a%84%e5%8c%ba%e5%88%ab" aria-label="private&amp;amp;protect的区别">private&amp;protect的区别</a></li>
                <li>
                    <a href="#%e6%9e%84%e9%80%a0%e5%87%bd%e6%95%b0%e4%b8%8e%e8%a7%a3%e6%9e%90%e5%87%bd%e6%95%b0%e9%ad%94%e6%9c%af%e6%96%b9%e6%b3%95" aria-label="构造函数与解析函数(魔术方法)">构造函数与解析函数(魔术方法)</a></li></ul>
                </li>
                <li>
                    <a href="#%e7%bb%a7%e6%89%bf%e7%89%b9%e6%ae%8a%e7%b1%bb" aria-label="继承&amp;amp;特殊类">继承&amp;特殊类</a><ul>
                        
                <li>
                    <a href="#%e5%8d%95%e9%93%be%e5%bc%8f%e7%bb%a7%e6%89%bf" aria-label="单链式继承">单链式继承</a></li>
                <li>
                    <a href="#%e5%a4%9a%e7%bb%a7%e6%89%bf" aria-label="多继承">多继承</a></li>
                <li>
                    <a href="#%e7%89%b9%e6%ae%8a%e7%b1%bb" aria-label="特殊类">特殊类</a></li></ul>
                </li>
                <li>
                    <a href="#%e9%ad%94%e6%9c%af%e6%96%b9%e6%b3%95" aria-label="魔术方法">魔术方法</a><ul>
                        
                <li>
                    <a href="#%e5%b1%9e%e6%80%a7%e7%9b%b8%e5%85%b3" aria-label="属性相关">属性相关</a></li>
                <li>
                    <a href="#%e6%96%b9%e6%b3%95%e7%9b%b8%e5%85%b3" aria-label="方法相关">方法相关</a></li>
                <li>
                    <a href="#%e7%89%b9%e6%ae%8a" aria-label="特殊">特殊</a></li></ul>
                </li></ul>
                </li>
                <li>
                    <a href="#%e9%94%99%e8%af%af%e5%bc%82%e5%b8%b8%e5%a4%84%e7%90%86" aria-label="错误&amp;amp;异常处理">错误&amp;异常处理</a><ul>
                        
                <li>
                    <a href="#%e9%94%99%e8%af%af" aria-label="错误">错误</a><ul>
                        
                <li>
                    <a href="#%e9%94%99%e8%af%af%e5%a4%84%e7%90%86%e5%87%bd%e6%95%b0%e7%9a%84%e5%8f%82%e6%95%b0" aria-label="错误处理函数的参数">错误处理函数的参数</a></li></ul>
                </li>
                <li>
                    <a href="#%e5%bc%82%e5%b8%b8" aria-label="异常">异常</a><ul>
                        
                <li>
                    <a href="#%e8%87%aa%e5%ae%9a%e4%b9%89%e5%bc%82%e5%b8%b8%e7%9a%84%e5%a4%84%e7%90%86" aria-label="自定义异常的处理">自定义异常的处理</a><ul>
                        
                <li>
                    <a href="#%e4%be%9d%e8%b5%96%e6%96%b9%e6%b3%95" aria-label="依赖方法">依赖方法</a></li>
                <li>
                    <a href="#%e5%9f%ba%e6%9c%ac%e6%80%9d%e8%b7%af" aria-label="基本思路">基本思路</a></li></ul>
                </li>
                <li>
                    <a href="#%e6%9c%ac%e4%be%8b%e5%ae%9e%e7%8e%b0%e6%80%9d%e8%b7%af" aria-label="本例实现思路">本例实现思路</a><ul>
                        
                <li>
                    <a href="#-%e8%a7%86%e5%9b%be%e6%b8%b2%e6%9f%93" aria-label="⚔ 视图渲染">⚔ 视图渲染</a></li>
                <li>
                    <a href="#-%e8%a1%a8%e5%8d%95%e9%aa%8c%e8%af%81" aria-label="⚔ 表单验证">⚔ 表单验证</a>
                </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
            </li>
            </ul>
        </div>
    </details>
</div>

  <div class="post-content"><h2 id="基本语法">基本语法<a hidden class="anchor" aria-hidden="true" href="#基本语法">#</a></h2>
<h3 id="输出语句">输出语句<a hidden class="anchor" aria-hidden="true" href="#输出语句">#</a></h3>
<table>
<thead>
<tr>
<th>语句</th>
<th>功能</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>echo</code></td>
<td>输出字符串类型</td>
</tr>
<tr>
<td><code>print_r</code></td>
<td>输出引用类型(对象,数组等)</td>
</tr>
<tr>
<td><code>var_dunp</code></td>
<td>检测变量类型</td>
</tr>
</tbody>
</table>
<p>::: tip
<code>echo</code>语句可用于给前端返回响应体。比如前端通过<code>ajax</code>请求，可以在<code>xhr.response</code>中直接得到<code>echo</code>的内容
:::</p>
<h3 id="变量常量">变量&amp;常量<a hidden class="anchor" aria-hidden="true" href="#变量常量">#</a></h3>
<p>👉🏼 <strong>变量</strong></p>
<table>
<thead>
<tr>
<th>语句</th>
<th>功能</th>
<th>返回值</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>isset()</code></td>
<td>检测变量是否存在</td>
<td>boolean</td>
</tr>
<tr>
<td><code>unset()</code></td>
<td>删除某个变量</td>
<td>none</td>
</tr>
</tbody>
</table>
<p>👉🏼 <strong>常量</strong></p>
<p>常量用<code>const</code> 或 <code>define</code> 定义，常量名一般全部大写，不受作用域的限制</p>
<p>::: tip</p>
<p>一般是define在类外定义常量，const在类内定义常量，并且const必须通过<code>类名::变量名</code>来进行访问。但是php5.3以上支持类外通过const定义常量。</p>
<p>:::</p>
<p>:::danger</p>
<p><code>const</code>不能在条件语句中使用，必出错</p>
<p>:::</p>
<blockquote>
<p>参考文章 <a href="https://www.jb51.net/article/163855.htm">《PHP中define() 与 const定义常量的区别详解》</a></p>
</blockquote>
<h3 id="三元表达式及使用">三元表达式及@使用<a hidden class="anchor" aria-hidden="true" href="#三元表达式及使用">#</a></h3>
<p><strong>省略写法</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">echo</span> $name<span style="color:#f92672">?:</span><span style="color:#e6db74">&#39;NO&#39;</span>;<span style="color:#75715e">//输出本身的话，可以省略！
</span></code></pre></td></tr></table>
</div>
</div><p><strong><code>??</code>的作用</strong></p>
<p>①检测变量是否定义(<code>isset</code>) ②检测变量是否为空(<code>is_null</code>)</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">echo</span> $name<span style="color:#f92672">??</span><span style="color:#e6db74">&#39;NO&#39;</span>;<span style="color:#75715e">//NO
</span></code></pre></td></tr></table>
</div>
</div><p><strong>@用来屏蔽错误</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">@</span>(<span style="color:#ae81ff">9</span><span style="color:#f92672">/</span><span style="color:#ae81ff">0</span>)<span style="color:#75715e">//不会报错
</span></code></pre></td></tr></table>
</div>
</div><h3 id="字符串相关函数">字符串相关函数<a hidden class="anchor" aria-hidden="true" href="#字符串相关函数">#</a></h3>
<h4 id="定界符">定界符<a hidden class="anchor" aria-hidden="true" href="#定界符">#</a></h4>
<p>以<code>&lt;&lt;&lt;</code>开头，用相同字符串定义开头&amp;结尾。</p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">$temp<span style="color:#f92672">=&lt;&lt;&lt;</span><span style="color:#a6e22e">tem</span>
<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">h1</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;color: #e01&#34;</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">这是一段临时HTML模板</span><span style="color:#f92672">&lt;/</span><span style="color:#a6e22e">h1</span><span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">h5</span> <span style="color:#a6e22e">style</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;color: #00b3ff&#34;</span><span style="color:#f92672">&gt;</span><span style="color:#a6e22e">hhc</span><span style="color:#f92672">&lt;/</span><span style="color:#a6e22e">h5</span><span style="color:#f92672">&gt;</span>
<span style="color:#f92672">&lt;</span><span style="color:#a6e22e">script</span><span style="color:#f92672">&gt;</span>
<span style="color:#a6e22e">document</span><span style="color:#f92672">.</span><span style="color:#a6e22e">querySelector</span>(<span style="color:#e6db74">&#34;h5&#34;</span>)<span style="color:#f92672">.</span><span style="color:#a6e22e">addEventListener</span>(<span style="color:#e6db74">&#34;mouseenter&#34;</span>,<span style="color:#66d9ef">function</span> (){
    <span style="color:#66d9ef">this</span><span style="color:#f92672">.</span><span style="color:#a6e22e">style</span><span style="color:#f92672">.</span><span style="color:#a6e22e">color</span><span style="color:#f92672">=</span><span style="color:#e6db74">&#34;#000&#34;</span>;
})
<span style="color:#f92672">&lt;/</span><span style="color:#a6e22e">script</span><span style="color:#f92672">&gt;</span>
<span style="color:#a6e22e">tem</span>;
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<h4 id="字符串连接">字符串连接<a hidden class="anchor" aria-hidden="true" href="#字符串连接">#</a></h4>
<p><code>.</code>符号用来连接字符串</p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">$str<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fer.com&#34;</span>;
<span style="color:#66d9ef">echo</span> $str<span style="color:#f92672">.</span><span style="color:#e6db74">&#34;=&gt;&#34;</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#34;hhhhc&#34;</span>;
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<h4 id="字符串长度">字符串长度<a hidden class="anchor" aria-hidden="true" href="#字符串长度">#</a></h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>参数</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>strlen() </code></td>
<td><code>[$str]</code></td>
<td>获得字符串长度，中文一个字两个字符！</td>
</tr>
<tr>
<td><code>mb_strlen()</code></td>
<td><code>[$str,encoding]</code></td>
<td>指定编码格式获取长度，指定为<code>utf8</code>，中文一个字一个字符</td>
</tr>
</tbody>
</table>
<h4 id="字符串格式">字符串格式<a hidden class="anchor" aria-hidden="true" href="#字符串格式">#</a></h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>trim()</code></td>
<td>去空格</td>
</tr>
<tr>
<td><code>strtoupper()</code>&amp;<code>strtolower</code></td>
<td>大小写转换</td>
</tr>
<tr>
<td><code>ucfirst()</code></td>
<td>指定一段字符串首字母大写</td>
</tr>
<tr>
<td><code>ucwords($sentence,delimiters)</code></td>
<td>以delimiters为分割，首字母大写</td>
</tr>
</tbody>
</table>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">$sentence<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;my name is jqf.let&#39;s go shopping!&#34;</span>;
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;&lt;hr&gt;&#34;</span>;
<span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">ucwords</span>($sentence,<span style="color:#e6db74">&#39;.&#39;</span>);<span style="color:#75715e">//My name is jqf.Let&#39;s go shopping!
</span></code></pre></td></tr></table>
</div>
</div><p>:::</p>
<h4 id="与数组相互转化">与数组相互转化<a hidden class="anchor" aria-hidden="true" href="#与数组相互转化">#</a></h4>
<p><code>explode(delimiter,$str)</code> &amp; <code>implode(glue,$arr)</code></p>
<h4 id="截取字符串">截取字符串<a hidden class="anchor" aria-hidden="true" href="#截取字符串">#</a></h4>
<p><code>substr($str,start,len)</code> &amp; <code>mb_substr($str,start,len,encoding)</code>，返回截取的字符串，原字符串不会发生改变</p>
<h4 id="md5加密">md5加密<a hidden class="anchor" aria-hidden="true" href="#md5加密">#</a></h4>
<p>::: theorem MD5
<strong>MD5信息摘要算法</strong>（英语：MD5 Message-Digest Algorithm），一种被广泛使用的<a href="https://baike.baidu.com/item/%E5%AF%86%E7%A0%81%E6%95%A3%E5%88%97%E5%87%BD%E6%95%B0/14937715">密码散列函数</a>，可以产生出一个128位（16<a href="https://baike.baidu.com/item/%E5%AD%97%E8%8A%82/1096318">字节</a>）的散列值（hash value），用于确保信息传输完整一致。</p>
<p>::: right
来自<a href="https://baike.baidu.com/item/MD5/212708">百度百科</a>
:::</p>
<h3 id="引入模块">引入模块<a hidden class="anchor" aria-hidden="true" href="#引入模块">#</a></h3>
<table>
<thead>
<tr>
<th>方法</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>include</code> &amp; <code>include_once</code></td>
<td>弱引用，如果引入的文件不存在则会<code>warning</code>(可以用<code>@</code>屏蔽掉)，但后续代码仍然执行</td>
</tr>
<tr>
<td><code>require</code> &amp; <code>require_once</code></td>
<td>强引用，所引文件不存在则会报<code>fatal mistake</code>,后续不再执行</td>
</tr>
</tbody>
</table>
<p>::: tip</p>
<p><code>include_once</code> &amp; <code>require_once</code>用来避免<strong>引入多次某个模块而造成的错误</strong>，具体如下</p>
<p>:::</p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//tools.php
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>(){
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;https://www.fintinger.xyz&#39;</span>;
}
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//1.php
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
<span style="color:#66d9ef">include</span> <span style="color:#e6db74">&#39;tools.php&#39;</span>;
<span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">show</span>();
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//2.php
</span><span style="color:#75715e"></span><span style="color:#66d9ef">include_once</span> <span style="color:#e6db74">&#34;1.php&#34;</span>;
<span style="color:#66d9ef">include_once</span> <span style="color:#e6db74">&#34;tools.php&#34;</span>;
</code></pre></td></tr></table>
</div>
</div><p><code>2.php</code>中引入了两次<code>tools.php</code>，通过<code>include_once</code>可以避免产生错误</p>
<p>:::</p>
<h3 id="函数相关">函数相关<a hidden class="anchor" aria-hidden="true" href="#函数相关">#</a></h3>
<h4 id="点语法">点语法<a hidden class="anchor" aria-hidden="true" href="#点语法">#</a></h4>
<p>类似于javascript，可以在函数传参数的时候实现&quot;聚合&quot;的效果</p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">sum</span>(<span style="color:#f92672">...</span>$nums){
    <span style="color:#a6e22e">print_r</span>($nums);
    <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;&lt;hr&gt;&#34;</span>;
    <span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">array_sum</span>($nums);
}
<span style="color:#a6e22e">sum</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">4</span>,<span style="color:#ae81ff">5</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">6</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">7</span>,<span style="color:#ae81ff">7</span>);
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<h4 id="传址传值">传址&amp;传值<a hidden class="anchor" aria-hidden="true" href="#传址传值">#</a></h4>
<p><code>&amp;</code> 用来传址</p>
<h4 id="严格模式">严格模式<a hidden class="anchor" aria-hidden="true" href="#严格模式">#</a></h4>
<p><code>declare(strict_types=1);</code>声明严格模式，严格模式下，如果约束了函数参数的类型，传入不是约束的值，会报错。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">declare</span>(<span style="color:#a6e22e">strict_types</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>);
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">sum</span>(<span style="color:#a6e22e">int</span> <span style="color:#f92672">...</span>$nums){
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">array_sum</span>($nums);
}

<span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">sum</span>(<span style="color:#ae81ff">1</span>,<span style="color:#ae81ff">2</span>,<span style="color:#ae81ff">3</span>,<span style="color:#ae81ff">4</span>,<span style="color:#e6db74">&#39;5&#39;</span>);<span style="color:#75715e">//Fatal error
</span></code></pre></td></tr></table>
</div>
</div><h4 id="php标准的函数">php标准的函数<a hidden class="anchor" aria-hidden="true" href="#php标准的函数">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>(<span style="color:#a6e22e">int</span> $var)<span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
{
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;hhc&#39;</span>;
}<span style="color:#75715e">//参数(php&gt;5)和返回值(php&gt;7)都有明确的类型约束
</span></code></pre></td></tr></table>
</div>
</div><h4 id="好用的变量函数">好用的变量函数！<a hidden class="anchor" aria-hidden="true" href="#好用的变量函数">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">$action<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fn&#34;</span>;
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fn</span>(){
	<span style="color:#75715e">//do something
</span><span style="color:#75715e"></span>}
$action()<span style="color:#75715e">//即可调用fn函数
</span></code></pre></td></tr></table>
</div>
</div><p><strong>具体应用</strong> ：根据图片后缀设定对应处理函数</p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">function</span> <span style="color:#a6e22e">png</span>()
{
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;png fn running...&#39;</span>;
}

<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">jpg</span>()
{
    <span style="color:#66d9ef">return</span> <span style="color:#e6db74">&#39;ipg fn running...&#39;</span>;
}

$file <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;logo.png&#39;</span>;

$action <span style="color:#f92672">=</span> <span style="color:#a6e22e">explode</span>(<span style="color:#e6db74">&#39;.&#39;</span>, $file)[<span style="color:#ae81ff">1</span>];

<span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">function_exists</span>($action)
    <span style="color:#f92672">?</span> $action()
    <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;无法处理这种格式的图片！&#39;</span>;
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<h3 id="数组相关">数组相关<a hidden class="anchor" aria-hidden="true" href="#数组相关">#</a></h3>
<h4 id="指针读取数组">指针读取数组<a hidden class="anchor" aria-hidden="true" href="#指针读取数组">#</a></h4>
<p><code>current($arr)</code>&amp;<code>next($arr)</code> 操作数组指针，如果读取不到，current则为0</p>
<h4 id="list">list()<a hidden class="anchor" aria-hidden="true" href="#list">#</a></h4>
<p>list — 把数组中的值赋给一组变量。</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">$info <span style="color:#f92672">=</span> <span style="color:#66d9ef">array</span>(<span style="color:#e6db74">&#39;coffee&#39;</span>, <span style="color:#e6db74">&#39;brown&#39;</span>, <span style="color:#e6db74">&#39;caffeine&#39;</span>);

<span style="color:#75715e">// 列出所有变量
</span><span style="color:#75715e"></span><span style="color:#66d9ef">list</span>($drink, $color, $power) <span style="color:#f92672">=</span> $info;
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;</span><span style="color:#e6db74">$drink</span><span style="color:#e6db74"> is </span><span style="color:#e6db74">$color</span><span style="color:#e6db74"> and </span><span style="color:#e6db74">$power</span><span style="color:#e6db74"> makes it special.</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
</code></pre></td></tr></table>
</div>
</div><p>::: tip</p>
<p>在 PHP 7.1.0 之前的版本，<strong>list()</strong> 仅能用于数字索引的数组，并假定数字索引从 0 开始。</p>
<p>:::</p>
<p>也就是说 PHP&gt;7.1.0，list可以用来解构<code>key=&gt;value</code>型数组了</p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">$arr<span style="color:#f92672">=</span>[
    <span style="color:#e6db74">&#34;age&#34;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#34;18&#34;</span>,
    <span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#34;fin&#34;</span>,
];
<span style="color:#66d9ef">list</span>(<span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">=&gt;</span>$name,<span style="color:#e6db74">&#34;age&#34;</span><span style="color:#f92672">=&gt;</span>$age)<span style="color:#f92672">=</span>$arr;
<span style="color:#66d9ef">echo</span> $name;<span style="color:#75715e">//fin
</span></code></pre></td></tr></table>
</div>
</div><p>关于PHP中类似于ES6的对象解构赋值操作，有种更加稳妥方便的方式，那就是<a href="https://www.php.net/manual/zh/function.extract.php">extract()</a></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php">$arr<span style="color:#f92672">=</span>[
    <span style="color:#e6db74">&#34;age&#34;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#34;18&#34;</span>,
    <span style="color:#e6db74">&#34;name&#34;</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#34;fin&#34;</span>,
];
<span style="color:#a6e22e">extract</span>($arr, <span style="color:#a6e22e">EXTR_PREFIX_SAME</span>, <span style="color:#e6db74">&#34;wddx&#34;</span>);<span style="color:#75715e">//重复则覆盖，前缀为&#34;wddx&#34;
</span><span style="color:#75715e"></span><span style="color:#66d9ef">echo</span> $name;<span style="color:#75715e">//fin
</span></code></pre></td></tr></table>
</div>
</div><p>:::</p>
<p>::: warning</p>
<p>PHP 5 里，<strong>list()</strong> 从最右边的参数开始赋值； PHP 7 里，<strong>list()</strong> 从最左边的参数开始赋值。</p>
<p>如果你用单纯的变量，不用担心这一点。 但是如果你用了具有索引的数组，通常你期望得到的结果和在 <strong>list()</strong> 中写的一样是从左到右的，但在 PHP 5 里实际上不是， 它是以相反顺序赋值的。</p>
<p>通常而言，不建议依赖于操作的顺序，在未来可能会再次发生修改。</p>
<p>:::</p>
<h4 id="操作数组">操作数组<a hidden class="anchor" aria-hidden="true" href="#操作数组">#</a></h4>
<p><code>foreach()</code>遍历数组</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">foreach</span>($arr $index<span style="color:#f92672">=&gt;</span>$item){
    <span style="color:#75715e">//可以获取索引和数组中的item
</span><span style="color:#75715e"></span>}
</code></pre></td></tr></table>
</div>
</div><p>传址修改原数组</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">foreach</span> ($arr <span style="color:#66d9ef">as</span> <span style="color:#f92672">&amp;</span>$item){
    <span style="color:#75715e">//do something(修改传址进来的数组元素)
</span><span style="color:#75715e"></span>}
</code></pre></td></tr></table>
</div>
</div><h4 id="数组增删操作">数组增删操作<a hidden class="anchor" aria-hidden="true" href="#数组增删操作">#</a></h4>
<table>
<thead>
<tr>
<th></th>
<th>增</th>
<th>删</th>
</tr>
</thead>
<tbody>
<tr>
<td>从末尾</td>
<td><code>array_push</code></td>
<td><code>array_pop</code></td>
</tr>
<tr>
<td>从开始位置</td>
<td><code>array_unshift</code></td>
<td><code>array_shift</code></td>
</tr>
</tbody>
</table>
<h4 id="其他方法类似js中">其他方法（类似JS中）<a hidden class="anchor" aria-hidden="true" href="#其他方法类似js中">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">/*遍历*/</span>
<span style="color:#a6e22e">array_map</span>()
<span style="color:#a6e22e">array_values</span>()
<span style="color:#a6e22e">array_keys</span>()
<span style="color:#a6e22e">array_filter</span>()


<span style="color:#75715e">/*判断*/</span>
<span style="color:#a6e22e">array_key_exists</span>()
<span style="color:#a6e22e">in_array</span>()

<span style="color:#75715e">/*合并*/</span>
<span style="color:#a6e22e">array_merge</span>()<span style="color:#75715e">//[originArr,newArr]
</span><span style="color:#75715e"></span><span style="color:#a6e22e">array_change_key_case</span>() <span style="color:#75715e">//修改key的大小写小:0/CASE_LOWER 大:1/CASE_UPPER
</span></code></pre></td></tr></table>
</div>
</div><p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//递归实现多维数组key的大小写转换
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
$config <span style="color:#f92672">=</span> [
    <span style="color:#e6db74">&#34;hOst&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;localhost&#34;</span>,
    <span style="color:#e6db74">&#34;POST&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">8000</span>,
    <span style="color:#e6db74">&#34;uSeR&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;admin&#34;</span>,
    <span style="color:#e6db74">&#34;cache&#34;</span> <span style="color:#f92672">=&gt;</span> [
        <span style="color:#e6db74">&#34;hOst&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;127.0.0.1&#34;</span>,
        <span style="color:#e6db74">&#34;user&#34;</span> <span style="color:#f92672">=&gt;</span> [
            <span style="color:#e6db74">&#34;namE&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;jqf&#34;</span>,
            <span style="color:#e6db74">&#34;token&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;qq9ad2437c622bdd38&#34;</span>
        ]
    ]
];
<span style="color:#e6db74">/**
</span><span style="color:#e6db74"> * @param array $arr
</span><span style="color:#e6db74"> * @param string $type
</span><span style="color:#e6db74"> * @return array
</span><span style="color:#e6db74"> */</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">fin_array_change_key_case</span>(<span style="color:#66d9ef">array</span> $arr, <span style="color:#a6e22e">string</span> $type <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;CASE_UPPER&#39;</span>)<span style="color:#f92672">:</span> <span style="color:#66d9ef">array</span>
{
    $action <span style="color:#f92672">=</span> $type <span style="color:#f92672">==</span> <span style="color:#e6db74">&#34;CASE_UPPER&#34;</span> <span style="color:#f92672">?</span> <span style="color:#e6db74">&#39;strtoupper&#39;</span> <span style="color:#f92672">:</span> <span style="color:#e6db74">&#39;strtolower&#39;</span>;
    <span style="color:#66d9ef">foreach</span> ($arr <span style="color:#66d9ef">as</span> $k <span style="color:#f92672">=&gt;</span> $v) {
        <span style="color:#75715e">//删掉原先的
</span><span style="color:#75715e"></span>        <span style="color:#a6e22e">unset</span>($arr[$k]);
        <span style="color:#75715e">//新的数组
</span><span style="color:#75715e"></span>        $arr[$action($k)] <span style="color:#f92672">=</span> <span style="color:#a6e22e">is_array</span>($v)
            <span style="color:#f92672">?</span> <span style="color:#a6e22e">fin_array_change_key_case</span>($v)
            <span style="color:#f92672">:</span> $v;
    }
    <span style="color:#66d9ef">return</span> $arr;
}

$res <span style="color:#f92672">=</span> <span style="color:#a6e22e">fin_array_change_key_case</span>($config);
<span style="color:#a6e22e">print_r</span>($res);
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<p>::: tip</p>
<p><code>array_walk_recursive($arr,function (&amp;$v,&amp;$k,$case){}</code>，专门用于递归遍历多维数组，注意其中自动传入址</p>
<p>:::</p>
<h3 id="时间相关">时间相关<a hidden class="anchor" aria-hidden="true" href="#时间相关">#</a></h3>
<h4 id="基本操作">基本操作<a hidden class="anchor" aria-hidden="true" href="#基本操作">#</a></h4>
<p>设置时区</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">date_default_timezone_set</span>(<span style="color:#a6e22e">timezone_identifier</span>)
</code></pre></td></tr></table>
</div>
</div><p><strong>注：</strong> timezone_identifier取值有&quot;PRC&quot;，&ldquo;Asia/chongqing  &ldquo;，&ldquo;Asia/shanghai&rdquo;，&ldquo;Asia/urumqi&quot;等，分别对应时区</p>
<p>格式化时间</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">date</span>(<span style="color:#e6db74">&#39;Y-m-d hⓜ️s&#39;</span>);
</code></pre></td></tr></table>
</div>
</div><p>时间戳</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">time</span>()
<span style="color:#a6e22e">microtime</span>(<span style="color:#66d9ef">true</span>)<span style="color:#75715e">//true 返回浮点数 false 返回字符串
</span></code></pre></td></tr></table>
</div>
</div><p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
<span style="color:#75715e">//得到函数执行时间的函数
</span><span style="color:#75715e"></span><span style="color:#e6db74">/**测试函数执行时间
</span><span style="color:#e6db74"> * @param null $begin
</span><span style="color:#e6db74"> * @param null $end
</span><span style="color:#e6db74"> * @return array|float|mixed|string
</span><span style="color:#e6db74"> */</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">runtime</span>($begin <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>, $end <span style="color:#f92672">=</span> <span style="color:#66d9ef">null</span>)
{
    <span style="color:#66d9ef">static</span> $cache <span style="color:#f92672">=</span> [];
    <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">is_null</span>($begin)) {
        <span style="color:#66d9ef">return</span> $cache;
    } <span style="color:#66d9ef">elseif</span> (<span style="color:#a6e22e">is_null</span>($end)) {
        <span style="color:#66d9ef">return</span> $cache[$begin] <span style="color:#f92672">=</span> <span style="color:#a6e22e">microtime</span>(<span style="color:#66d9ef">true</span>);
    } <span style="color:#66d9ef">else</span> {
        <span style="color:#75715e">//👇🏼！！！！
</span><span style="color:#75715e"></span>        $end <span style="color:#f92672">=</span> $cache[$end] <span style="color:#f92672">??</span> <span style="color:#a6e22e">microtime</span>(<span style="color:#66d9ef">true</span>);
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">round</span>($end <span style="color:#f92672">-</span> $cache[$begin],<span style="color:#ae81ff">2</span>);
    }
}

<span style="color:#75715e">//测试for和while循环
</span><span style="color:#75715e"></span>$LEN<span style="color:#f92672">=</span><span style="color:#ae81ff">10000000</span>;

<span style="color:#75715e">//1.for
</span><span style="color:#75715e"></span><span style="color:#a6e22e">runtime</span>(<span style="color:#e6db74">&#39;for&#39;</span>);
<span style="color:#66d9ef">for</span> ($i <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>; $i <span style="color:#f92672">&lt;</span> $LEN; $i<span style="color:#f92672">++</span>) {}
<span style="color:#a6e22e">runtime</span>(<span style="color:#e6db74">&#39;forEnd&#39;</span>);
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#39;for循环:&#39;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">runtime</span>(<span style="color:#e6db74">&#39;for&#39;</span>, <span style="color:#e6db74">&#39;forEnd&#39;</span>);

<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;&lt;hr&gt;&#34;</span>;

<span style="color:#75715e">//2.while
</span><span style="color:#75715e"></span><span style="color:#a6e22e">runtime</span>(<span style="color:#e6db74">&#39;while&#39;</span>);
$i<span style="color:#f92672">=</span><span style="color:#ae81ff">0</span>;
<span style="color:#66d9ef">while</span> ($i<span style="color:#f92672">&lt;</span>$LEN){$i<span style="color:#f92672">++</span>;};
<span style="color:#a6e22e">runtime</span>(<span style="color:#e6db74">&#39;whileEnd&#39;</span>);
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#39;while循环:&#39;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">runtime</span>(<span style="color:#e6db74">&#39;while&#39;</span>, <span style="color:#e6db74">&#39;whileEnd&#39;</span>);
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;&lt;hr&gt;&#34;</span>;
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#39;总执行时间:&#39;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">runtime</span>(<span style="color:#e6db74">&#39;for&#39;</span>,<span style="color:#e6db74">&#39;whileEnd&#39;</span>);
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<h4 id="一些相关函数">一些相关函数<a hidden class="anchor" aria-hidden="true" href="#一些相关函数">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
<span style="color:#75715e">//date() =&gt;填参数得到不同的结果
</span><span style="color:#75715e">//getdate() =&gt;返回数组
</span><span style="color:#75715e"></span>
<span style="color:#75715e">/*转为时间戳*/</span>
<span style="color:#75715e">//具体查手册
</span><span style="color:#75715e">//strtotime() =&gt;参数为str,比如&#34;NOW&#34;,&#34;2020-04-02 10:00:00&#34;...
</span><span style="color:#75715e">//strtotime(&#39;+1 year +10 day&#39;)=&gt;1年10天后
</span><span style="color:#75715e">//strtotime(&#39;next friday&#39;)=&gt;下个星期五
</span></code></pre></td></tr></table>
</div>
</div><h4 id="内置时间类">内置时间类<a hidden class="anchor" aria-hidden="true" href="#内置时间类">#</a></h4>
<p><strong>Date()对象</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>

<span style="color:#75715e">//new Date()-&gt;format()//%m月%d天%h小时,一共%a天
</span><span style="color:#75715e">//new Date()-&gt;setdate()
</span><span style="color:#75715e">//new Date()-&gt;diff() 获取俩时间差值
</span><span style="color:#75715e">//...
</span><span style="color:#75715e"></span>
</code></pre></td></tr></table>
</div>
</div><p><strong>DateInterval()对象</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//参数&#39;P2DT2H5M&#39;=&gt;增加2d2h5m
</span><span style="color:#75715e">//P-&gt;开始,  D-&gt;&#39;day&#39;,  T-&gt;分割日期和时间
</span><span style="color:#75715e">//配合new Date-&gt;add($interval)函数使用！！！
</span></code></pre></td></tr></table>
</div>
</div><h3 id="正则表达式">正则表达式<a hidden class="anchor" aria-hidden="true" href="#正则表达式">#</a></h3>
<p><strong>相关函数</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
<span style="color:#75715e">//preg_match(reg,str,res) =&gt;匹配一个
</span><span style="color:#75715e">//preg_match_all()=&gt;所有
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//preg_split(reg,str)=&gt;拆分字符串，返回处理后结果
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//preg_replace(reg,val_replace,str)=&gt;替换
</span><span style="color:#75715e">//preg_replace_callback(reg,fn,str)=&gt;fn中接收$matches实现复杂逻辑
</span></code></pre></td></tr></table>
</div>
</div><p>::: warning</p>
<p>注意字符串操作函数的区别,<code>str_split</code> 等</p>
<p>:::</p>
<h2 id="cookie">COOKIE<a hidden class="anchor" aria-hidden="true" href="#cookie">#</a></h2>
<p>cookie是客户端存储数据的手段，并在请求服务器时自动携带cookie数据。</p>
<p>::: tip</p>
<p>COOKIE 保存在浏览器</p>
<p>:::</p>
<h3 id="设置">设置<a hidden class="anchor" aria-hidden="true" href="#设置">#</a></h3>
<p>⚡ <code>setcookie()</code></p>
<p><strong>参数:</strong></p>
<table>
<thead>
<tr>
<th>参数</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>name</strong></td>
<td>Cookie的名称</td>
</tr>
<tr>
<td><strong>value</strong></td>
<td>cookie的价值。该值存储在客户端计算机上; 不要存储敏感信息</td>
</tr>
<tr>
<td><strong>expires</strong></td>
<td>Cookie过期的时间。这是一个Unix时间戳，可以使用<a href="https://www.php.net/manual/en/function.time.php">time（）</a>函数加上希望它到期之前的秒数来设置它。</td>
</tr>
<tr>
<td><strong>path</strong></td>
<td>服务器上可以使用cookie的路径。如果设置为*“/”*，则cookie将在整个范围内可用</td>
</tr>
<tr>
<td><strong>domain</strong></td>
<td>cookie可用的域。（例如*“www.houdunren.com”*）将使cookie可用于该子域及其所有其他子域（即w2.www.houdunren.com）。要使cookie可用于整个域（包括其所有子域），只需将值设置为域名（在本例中为*“houdunren.com”*）</td>
</tr>
<tr>
<td><strong>secure</strong></td>
<td>表示cookie应仅通过客户端的安全HTTPS连接传输</td>
</tr>
<tr>
<td><strong>httponly</strong></td>
<td>当<strong>TRUE</strong>cookie只能通过HTTP协议访问时。这意味着脚本语言（例如JavaScript）无法访问cookie。</td>
</tr>
</tbody>
</table>
<p>来源: <a href="https://houdunren.gitee.io/note/php/8%20%E4%BC%9A%E8%AF%9D%E6%8E%A7%E5%88%B6.html#%E8%AE%BE%E7%BD%AE">后盾人教程</a></p>
<h2 id="session">SESSION<a hidden class="anchor" aria-hidden="true" href="#session">#</a></h2>
<h3 id="概述">概述<a hidden class="anchor" aria-hidden="true" href="#概述">#</a></h3>
<p>session是服务器会话状态，可用于记录访问用户后台会话数据。不同用户或一个用户用不同浏览器在同一网站发起php请求会产生不同的session，然后保存在本地文件夹(session.save_path)或者其它端。</p>
<p>::: tip</p>
<p>与COOKIE不同，SESSION保存在本地</p>
<p>:::</p>
<p><img loading="lazy" src="https://gitee.com/fintinger/figure-bed/raw/master//images/20201002191828.png" alt="Chrome中"  />
</p>
<p>保存的session在同一域下都可以通过<code>$_SESSION</code>访问到，为数组形式。</p>
<h3 id="基本使用">基本使用<a hidden class="anchor" aria-hidden="true" href="#基本使用">#</a></h3>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">session_start</span>();<span style="color:#75715e">//开始
</span><span style="color:#75715e"></span>$_SESSION[<span style="color:#e6db74">&#34;web&#34;</span>] <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;https://www.fintinger.xyz&#34;</span>;<span style="color:#75715e">//设置数据
</span><span style="color:#75715e"></span><span style="color:#a6e22e">print_r</span>($_SESSION);<span style="color:#75715e">//可以通过超全局数组获取
</span></code></pre></td></tr></table>
</div>
</div><h3 id="配置">配置<a hidden class="anchor" aria-hidden="true" href="#配置">#</a></h3>
<h4 id="session储存目录">SESSION储存目录<a hidden class="anchor" aria-hidden="true" href="#session储存目录">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">session_save_path</span>(<span style="color:#e6db74">&#34;./temp&#34;</span>);<span style="color:#75715e">//查看或设置
</span></code></pre></td></tr></table>
</div>
</div><h4 id="自定义namevalue">自定义Name&amp;Value<a hidden class="anchor" aria-hidden="true" href="#自定义namevalue">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//id一般在自定义session引擎的时候设置
</span><span style="color:#75715e"></span><span style="color:#a6e22e">session_name</span>(<span style="color:#e6db74">&#34;jqf&#34;</span>);
<span style="color:#a6e22e">session_id</span>(<span style="color:#e6db74">&#34;123&#34;</span>);
<span style="color:#a6e22e">session_start</span>();<span style="color:#75715e">//配置在开始之前
</span></code></pre></td></tr></table>
</div>
</div><p><img loading="lazy" src="https://gitee.com/fintinger/figure-bed/raw/master//images/20201002193918.png" alt="自定义Name&amp;amp;Value"  />
</p>
<h3 id="gc垃圾回收机制">GC垃圾回收机制<a hidden class="anchor" aria-hidden="true" href="#gc垃圾回收机制">#</a></h3>
<blockquote>
<p>如果使用默认的SESSION处理引擎，修改php.ini的配置即可</p>
</blockquote>
<h4 id="过期时间">过期时间<a hidden class="anchor" aria-hidden="true" href="#过期时间">#</a></h4>
<p><code>session.gc_maxlifetime</code> 设置文件过期时间，默认为1440s = 24min。</p>
<p>::: tip</p>
<p>如果(下面讲到的概率)调用这个函数，就会遍历保存SESSION的文件夹，判断如果本次产生SESSION与上次产生相差超过24min就会删除上次产生的SESSION，更新为本次保存的SESSION($session_id不会改变，即文件名)。</p>
<p>:::</p>
<h4 id="调用概率">调用概率<a hidden class="anchor" aria-hidden="true" href="#调用概率">#</a></h4>
<blockquote>
<p>如果每次调用php，都回去保存SESSOIN的文件夹遍历，进行垃圾回收(GC)，当用户量很多时，就会很大程度上影响性能，因此加入了概率这一概念，即每次调用php时，启动垃圾回收程序的概率<code>session.gc_probability/session.gc_divisor</code></p>
</blockquote>
<p>👉 <code>session.gc_probability</code> 基率</p>
<p>session清除无效session的基率。</p>
<p>👉 <code>session.gc_divisor </code></p>
<p>启动垃圾回收程序的概率。概率计算公式为：session.gc_probability / session.gc_divisor，如果网站访问量大建议将概率降低如 1 / 1000 ~ 5000。</p>
<h3 id="自定义session处理引擎">自定义SESSION处理引擎<a hidden class="anchor" aria-hidden="true" href="#自定义session处理引擎">#</a></h3>
<h4 id="使用">使用<a hidden class="anchor" aria-hidden="true" href="#使用">#</a></h4>
<p>::: warning</p>
<p>在start之前设置，<code>session_set_save_handle(new FileHandle)</code>括号中为自定义的处理类</p>
<p>:::</p>
<p>然后按照正常session处理使用即可！</p>
<h4 id="定义">定义<a hidden class="anchor" aria-hidden="true" href="#定义">#</a></h4>
<p>🎈 使用 <code>SessionHandlerInterface</code> 接口(implements)</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FileHandle</span> <span style="color:#a6e22e">inplements</span> <span style="color:#a6e22e">SessionlandlerInterface</span>{}
</code></pre></td></tr></table>
</div>
</div><p>🎈<strong>标准模板</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>


<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FileHandle</span> <span style="color:#66d9ef">implements</span> <span style="color:#a6e22e">SessionHandlerInterface</span>
{

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @inheritDoc
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">close</span>()
    {
        <span style="color:#75715e">// TODO: Implement close() method.
</span><span style="color:#75715e"></span>    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @inheritDoc
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">destroy</span>($session_id)
    {
        <span style="color:#75715e">// TODO: Implement destroy() method.
</span><span style="color:#75715e"></span>    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @inheritDoc
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">gc</span>($maxlifetime)
    {
        <span style="color:#75715e">// TODO: Implement gc() method.
</span><span style="color:#75715e"></span>    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @inheritDoc
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">open</span>($save_path, $name)
    {
        <span style="color:#75715e">// TODO: Implement open() method.
</span><span style="color:#75715e"></span>    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @inheritDoc
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">read</span>($session_id)
    {
        <span style="color:#75715e">// TODO: Implement read() method.
</span><span style="color:#75715e"></span>    }

    <span style="color:#e6db74">/**
</span><span style="color:#e6db74">     * @inheritDoc
</span><span style="color:#e6db74">     */</span>
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">write</span>($session_id, $session_data)
    {
        <span style="color:#75715e">// TODO: Implement write() method.
</span><span style="color:#75715e"></span>    }

}
</code></pre></td></tr></table>
</div>
</div><p>逐一实现其中方法即可！</p>
<h4 id="实例">实例<a hidden class="anchor" aria-hidden="true" href="#实例">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">28
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">29
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">30
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">31
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">32
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">33
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">34
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">35
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">36
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">37
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">38
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">39
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">40
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">41
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">42
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">43
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">44
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">45
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">46
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">47
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">48
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">49
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">50
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">51
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">52
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">53
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">54
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">55
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">56
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">57
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">58
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">59
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">60
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">61
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">62
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">63
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">64
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">65
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">66
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">67
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">68
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">69
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>

<span style="color:#e6db74">/**
</span><span style="color:#e6db74"> * Class FileHandle
</span><span style="color:#e6db74"> * @param $path //session储存路径
</span><span style="color:#e6db74"> * @param $maxlifetime //session文件过期时间
</span><span style="color:#e6db74"> */</span>
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">FileHandle</span> <span style="color:#66d9ef">implements</span> <span style="color:#a6e22e">SessionHandlerInterface</span>
{

    <span style="color:#66d9ef">protected</span> $path;

    <span style="color:#66d9ef">protected</span> $maxlifetime;

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> __construct($path <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;session&#34;</span>, $maxlifetime <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;1440&#34;</span>)
    {
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">path</span> <span style="color:#f92672">=</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">mkdir</span>($path);
        $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">maxlifetime</span> <span style="color:#f92672">=</span> $maxlifetime;
    }

    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">mkdir</span>($path)
    {
        <span style="color:#a6e22e">is_dir</span>($path) <span style="color:#f92672">||</span> <span style="color:#a6e22e">mkdir</span>($path);

        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">realpath</span>($path);
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">close</span>()<span style="color:#f92672">:</span> <span style="color:#a6e22e">bool</span>
    {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">destroy</span>($session_id)<span style="color:#f92672">:</span> <span style="color:#a6e22e">bool</span>
    {
        <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">is_file</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">path</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#34;/&#34;</span><span style="color:#f92672">.</span>$session_id)) {
            <span style="color:#f92672">@</span><span style="color:#a6e22e">unlink</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">path</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#34;/&#34;</span><span style="color:#f92672">.</span>$session_id);
        }

        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">gc</span>($maxlifetime)<span style="color:#f92672">:</span> <span style="color:#a6e22e">bool</span>
    {
        <span style="color:#66d9ef">foreach</span> (<span style="color:#a6e22e">glob</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">path</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#34;/*&#34;</span>) <span style="color:#66d9ef">as</span> $file) {
            <span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">filemtime</span>($file) <span style="color:#f92672">+</span> $this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">maxlifetime</span> <span style="color:#f92672">&lt;</span> <span style="color:#a6e22e">time</span>()) {
                <span style="color:#f92672">@</span><span style="color:#a6e22e">unlink</span>($file);
            }
        }

        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }


    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">open</span>($path, $name)<span style="color:#f92672">:</span> <span style="color:#a6e22e">bool</span>
    {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">read</span>($session_id)<span style="color:#f92672">:</span> <span style="color:#a6e22e">string</span>
    {
        <span style="color:#66d9ef">return</span> (<span style="color:#a6e22e">string</span>)<span style="color:#f92672">@</span><span style="color:#a6e22e">file_get_contents</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">path</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#34;/&#34;</span><span style="color:#f92672">.</span>$session_id);
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">write</span>($session_id, $session_data)<span style="color:#f92672">:</span> <span style="color:#a6e22e">bool</span>
    {
        <span style="color:#66d9ef">return</span> (<span style="color:#a6e22e">bool</span>)<span style="color:#f92672">@</span><span style="color:#a6e22e">file_put_contents</span>($this<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">path</span><span style="color:#f92672">.</span><span style="color:#e6db74">&#34;/&#34;</span><span style="color:#f92672">.</span>$session_id, $session_data);
    }

}
</code></pre></td></tr></table>
</div>
</div><p><strong>注意：</strong></p>
<p>⚡ 处理的路径要为绝对路径才行，可以利用<code>realpath($path)</code>得到</p>
<p>⚡ 实现的方法就是，“开，关，读，写，卸，垃”，本方法中&quot;开，关&quot;没有做过多的处理</p>
<h4 id="whatt-more">What&rsquo;t more💭<a hidden class="anchor" aria-hidden="true" href="#whatt-more">#</a></h4>
<p>在write方法中添加延迟<code>sleep()</code>，并且修改<code>php.ini</code> 中的调用概率为1(<code>session.gc_divisor </code>=1)，即每次都调用垃圾回收，就可以看到session是在删除之后再被重新创建的！</p>
<h2 id="文件操作">文件操作<a hidden class="anchor" aria-hidden="true" href="#文件操作">#</a></h2>
<h3 id="指针操作函数">指针操作函数<a hidden class="anchor" aria-hidden="true" href="#指针操作函数">#</a></h3>
<p><code>fseek($handle,int offset)</code> =&gt;移动文件中指针</p>
<p><code>fread($handle,length)</code> =&gt;读取文件操作，指针会自动移动到length位置</p>
<p>::: tip</p>
<p>$handle 为<code>source</code> 类型，通过<code>fopen()</code>函数获得</p>
<p>:::</p>
<h3 id="文件打开与写入操作fopen函数详解">文件打开与写入操作fopen函数详解：<a hidden class="anchor" aria-hidden="true" href="#文件打开与写入操作fopen函数详解">#</a></h3>
<p><code>fopen($path,mode)</code> ,mode的取值如下</p>
<table>
<thead>
<tr>
<th>模式</th>
<th>功能</th>
<th>+模式</th>
<th>二进制文件</th>
<th>文件不存在</th>
<th>文件存在</th>
</tr>
</thead>
<tbody>
<tr>
<td>r</td>
<td>读取文件不可写</td>
<td>r+可写入文件</td>
<td>r+b 操作二进制文件</td>
<td>创建</td>
<td>操作</td>
</tr>
<tr>
<td>w</td>
<td>从头写入，不可读</td>
<td>w+可读取文件</td>
<td>w+b..</td>
<td>创建</td>
<td>操作</td>
</tr>
<tr>
<td>a</td>
<td>追加内容不可读取</td>
<td>a+可读取</td>
<td>a+b</td>
<td>创建</td>
<td>操作</td>
</tr>
<tr>
<td>x</td>
<td>从头写入，不可读</td>
<td>x+可读</td>
<td>x+b</td>
<td>创建</td>
<td>不会打开，fopen返回false，产生一个警告</td>
</tr>
</tbody>
</table>
<p>::: warning</p>
<p>操作二进制文件(图片等，需要设置头信息)，比如:<code>header('Content-type:image/jpg');</code></p>
<p>:::</p>
<h3 id="其他操作函数">其他操作函数<a hidden class="anchor" aria-hidden="true" href="#其他操作函数">#</a></h3>
<p>读取操作</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
$handle<span style="color:#f92672">=</span><span style="color:#a6e22e">fopen</span>(<span style="color:#e6db74">&#34;file/test.txt&#34;</span>,<span style="color:#e6db74">&#39;r&#39;</span>);

<span style="color:#75715e">//feof($handle)=&gt;文件读取是否完毕
</span><span style="color:#75715e">//while (!feof($handle)){
</span><span style="color:#75715e">//    echo fread($handle,1);
</span><span style="color:#75715e">//}
</span><span style="color:#75715e"></span>

<span style="color:#75715e">//fgetc($handle)=&gt;每次读取一个字符！
</span><span style="color:#75715e"></span><span style="color:#66d9ef">while</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">feof</span>($handle)){
    <span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">fgetc</span>($handle);
}


<span style="color:#75715e">//fgets($handle)=&gt; 每次一行！
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//fgetss($handle)=&gt;v7.3弃用，
</span><span style="color:#75715e">//fgetcsv($handle,split)=&gt;读取，并指定用什么分割开来
</span></code></pre></td></tr></table>
</div>
</div><p>权限判断，检查文件</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//文件&amp;目录权限
</span><span style="color:#75715e">//is_writable()
</span><span style="color:#75715e">//is_readable()
</span><span style="color:#75715e"></span>
<span style="color:#75715e">//文件&amp;目录检查
</span><span style="color:#75715e">//file_exists()
</span><span style="color:#75715e">//is_file()&amp;is_dir()
</span></code></pre></td></tr></table>
</div>
</div><h3 id="快速读取写入文件">快速读取&amp;写入文件<a hidden class="anchor" aria-hidden="true" href="#快速读取写入文件">#</a></h3>
<p><code>file_get_contents(filename|url)</code> 获取文件内容</p>
<p><code>file_put_contents(filename,data)</code> =&gt;w模式写入</p>
<p><code>file_put_contents(filename,data,FILE_APPEND)</code> =&gt;a模式写入</p>
<h3 id="文件复制移动">文件复制移动<a hidden class="anchor" aria-hidden="true" href="#文件复制移动">#</a></h3>
<p><strong>文件复制</strong></p>
<p><code>copy($source,$dest)</code></p>
<p><strong>文件移动</strong></p>
<p><code>rename($oldname,$newname)</code></p>
<p><strong>注：</strong> <code>rename()</code> 同时具有重命名和移动文件的功能</p>
<h3 id="目录操作函数">目录操作函数<a hidden class="anchor" aria-hidden="true" href="#目录操作函数">#</a></h3>
<p>👉 <code>is_dir()</code></p>
<p><strong>用途：</strong> 判断是否存在该目录</p>
<p>👉 <code>mkdir($pathname,mode,recursive)</code></p>
<p><strong>参数：</strong></p>
<p>[1] <strong>$pathname</strong> 路径</p>
<p>[2] <strong>mode</strong> 默认0777,意味着最大可能的访问权，一般设定为0755</p>
<p>::: warning</p>
<p>mode在windows 下被忽略</p>
<p>:::</p>
<p><strong>recursive</strong> 是否递归创建，</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">mkdir</span>(<span style="color:#e6db74">&#34;a/b/c&#34;</span>,<span style="color:#ae81ff">0755</span>,<span style="color:#66d9ef">true</span>)
</code></pre></td></tr></table>
</div>
</div><p>👉 <code>readdir()</code></p>
<p><strong>说明：</strong> 调用一次就读取一个当前目录下的文件或文件夹，读取不到则返回false</p>
<p><strong>注意：</strong> readdir 方法会读取到&rdquo;.&rdquo; 和 &ldquo;..&ldquo;这两个默认存在的目录</p>
<p>👉 <code>scandir()</code></p>
<p><strong>说明：</strong> 相当于循环<code>readdir()</code></p>
<p>👉 <code>glob()</code></p>
<p><strong>说明：</strong> 目录的遍历操作</p>
<p><strong>参数：</strong></p>
<p>[1] pattern 模式</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">glob</span>(<span style="color:#e6db74">&#34;./*&#34;</span>)<span style="color:#75715e">//当前路径下所有
</span><span style="color:#75715e"></span><span style="color:#a6e22e">glob</span>(<span style="color:#e6db74">&#34;./*.php&#34;</span>)<span style="color:#75715e">//当前路径下的php文件
</span><span style="color:#75715e"></span><span style="color:#a6e22e">glob</span>(<span style="color:#e6db74">&#34;{./*.php,*.txt}&#34;</span>)<span style="color:#75715e">//当前路径下php和txt
</span></code></pre></td></tr></table>
</div>
</div><p>[2] flag</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//GLOB_MARK =&gt;后面补 &#34;/&#34;
</span><span style="color:#75715e">//GLOB_NOSORT =&gt;使用系统默认排序
</span><span style="color:#75715e">//GLOB_ERR =&gt;没有权限操作目录时，停止所有动作（默认跳过）
</span><span style="color:#75715e">//GLOB_NOCHECK =&gt;目录不存在，返回模式
</span></code></pre></td></tr></table>
</div>
</div><h3 id="共享锁和独占锁">共享锁和独占锁<a hidden class="anchor" aria-hidden="true" href="#共享锁和独占锁">#</a></h3>
<blockquote>
<p><code>flock($handle,$operation)</code> 函数用来给文件上锁</p>
</blockquote>
<table>
<thead>
<tr>
<th>$operation</th>
<th>名称</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td>LOCK_SH</td>
<td>共享锁</td>
<td>如果是读取，不需要等待，但如果是写入，需要等待读取完成。</td>
</tr>
<tr>
<td>LOCK_EX</td>
<td>独占锁</td>
<td>无论写入/读取都需要等待。</td>
</tr>
<tr>
<td>LOCK_UN</td>
<td>释放锁</td>
<td>无论使用共享/读占锁，使用完后需要解锁。</td>
</tr>
<tr>
<td>LOCK_NB</td>
<td></td>
<td>当被锁定时，不阻塞，而是提示锁定</td>
</tr>
</tbody>
</table>
<p>::: warning</p>
<p>windows不支持<code>$operation = LOCN_NB</code> ，也不支持flock的第四个参数,具体<a href="https://www.php.net/manual/zh/function.flock.php">GO</a></p>
<p>:::</p>
<blockquote>
<p><strong>情景1</strong> 用户u1正在读取文件，u2的写入操作等到u1读取完毕之后(产生阻塞)才能再进行</p>
</blockquote>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//u1.php
</span><span style="color:#75715e"></span>$handle<span style="color:#f92672">=</span><span style="color:#a6e22e">fopen</span>(<span style="color:#e6db74">&#34;jqf.txt&#34;</span>,<span style="color:#e6db74">&#34;r&#34;</span>);
<span style="color:#a6e22e">flock</span>($handle,<span style="color:#a6e22e">LOCK_SH</span>);
<span style="color:#a6e22e">sleep</span>(<span style="color:#ae81ff">3</span>);<span style="color:#75715e">//模拟写入操作的延时
</span><span style="color:#75715e"></span><span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">fread</span>($handle,<span style="color:#ae81ff">99</span>);
<span style="color:#a6e22e">flock</span>($handle,<span style="color:#a6e22e">LOCK_UN</span>);
<span style="color:#a6e22e">fclose</span>($handle);
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//u2.php
</span><span style="color:#75715e"></span>$handle <span style="color:#f92672">=</span> <span style="color:#a6e22e">fopen</span>(<span style="color:#e6db74">&#34;jqf.txt&#34;</span>, <span style="color:#e6db74">&#34;a+&#34;</span>);
<span style="color:#a6e22e">flock</span>($handle, <span style="color:#a6e22e">LOCK_EX</span>);
<span style="color:#a6e22e">fwrite</span>($handle, <span style="color:#e6db74">&#39;*hm&#39;</span>);
<span style="color:#a6e22e">fseek</span>($handle, <span style="color:#ae81ff">0</span>);
<span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">fread</span>($handle, <span style="color:#ae81ff">99</span>);
<span style="color:#a6e22e">flock</span>($handle,<span style="color:#a6e22e">LOCK_UN</span>);
<span style="color:#a6e22e">fclose</span>($handle);
</code></pre></td></tr></table>
</div>
</div><blockquote>
<p><strong>情景2</strong> u1写完之后（产生阻塞）u2才能读取</p>
</blockquote>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//u1.php
</span><span style="color:#75715e"></span>$handle <span style="color:#f92672">=</span> <span style="color:#a6e22e">fopen</span>(<span style="color:#e6db74">&#39;jqf.txt&#39;</span>, <span style="color:#e6db74">&#39;a+&#39;</span>);
<span style="color:#a6e22e">flock</span>($handle, <span style="color:#a6e22e">LOCK_EX</span>);
<span style="color:#a6e22e">sleep</span>(<span style="color:#ae81ff">3</span>);
<span style="color:#a6e22e">fwrite</span>($handle, <span style="color:#e6db74">&#39;*hm&#39;</span>);
<span style="color:#a6e22e">fseek</span>($handle, <span style="color:#ae81ff">0</span>);
<span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">fread</span>($handle, <span style="color:#ae81ff">99</span>);
<span style="color:#a6e22e">flock</span>($handle, <span style="color:#a6e22e">LOCK_UN</span>);
<span style="color:#a6e22e">fclose</span>($handle);
</code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//u2.php
</span><span style="color:#75715e"></span>$handle<span style="color:#f92672">=</span><span style="color:#a6e22e">fopen</span>(<span style="color:#e6db74">&#39;jqf.txt&#39;</span>,<span style="color:#e6db74">&#39;r+&#39;</span>);
<span style="color:#a6e22e">flock</span>($handle,<span style="color:#a6e22e">LOCK_SH</span>);
<span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">fread</span>($handle,<span style="color:#ae81ff">99</span>);
<span style="color:#a6e22e">flock</span>($handle,<span style="color:#a6e22e">LOCK_UN</span>);
<span style="color:#a6e22e">fclose</span>($handle);
</code></pre></td></tr></table>
</div>
</div><h3 id="关于文件和目录操作常用的一些函数">关于文件和目录操作常用的一些函数<a hidden class="anchor" aria-hidden="true" href="#关于文件和目录操作常用的一些函数">#</a></h3>
<p><strong>[1] 格式化获取磁盘大小以及磁盘可用大小</strong></p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#e6db74">/**格式化获取磁盘空间大小
</span><span style="color:#e6db74"> * 注意数组的顺序，判断由大到小!!!!
</span><span style="color:#e6db74"> * @param int $total
</span><span style="color:#e6db74"> * @return string
</span><span style="color:#e6db74"> */</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">space_total</span>(<span style="color:#a6e22e">int</span> $total)<span style="color:#f92672">:</span><span style="color:#a6e22e">string</span>
{
    $config<span style="color:#f92672">=</span>[<span style="color:#ae81ff">3</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;GB&#39;</span>,<span style="color:#ae81ff">2</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;MB&#39;</span>,<span style="color:#ae81ff">1</span><span style="color:#f92672">=&gt;</span><span style="color:#e6db74">&#39;KB&#39;</span>];
    <span style="color:#66d9ef">foreach</span> ($config <span style="color:#66d9ef">as</span> $num<span style="color:#f92672">=&gt;</span>$unit) {
        <span style="color:#66d9ef">if</span> ($total<span style="color:#f92672">&gt;</span><span style="color:#a6e22e">pow</span>(<span style="color:#ae81ff">1024</span>,$num)){
            <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">round</span>($total<span style="color:#f92672">/</span><span style="color:#a6e22e">pow</span>(<span style="color:#ae81ff">1024</span>,$num))<span style="color:#f92672">.</span>$unit;
        }
    }
    <span style="color:#66d9ef">return</span> $total<span style="color:#f92672">.</span><span style="color:#e6db74">&#39;B&#39;</span>;
}

<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;&lt;hr&gt;&#34;</span>;
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#39;磁盘总大小：&#39;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">space_total</span>(<span style="color:#a6e22e">disk_total_space</span>(<span style="color:#e6db74">&#39;.&#39;</span>));
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;&lt;hr&gt;&#34;</span>;
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#39;剩余大小：&#39;</span><span style="color:#f92672">.</span><span style="color:#a6e22e">space_total</span>(<span style="color:#a6e22e">disk_free_space</span>(<span style="color:#e6db74">&#39;.&#39;</span>));
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<p><strong>[2]利用filetime实现缓存机制</strong></p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#e6db74">/**
</span><span style="color:#e6db74"> * 如果刷新页面前后不超过10s，将会一直走缓存,否则会更新缓存
</span><span style="color:#e6db74"> * ob_start()&amp;ob_get_contents()可以在引入时获取引入内容
</span><span style="color:#e6db74"> */</span>
$CACHE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;file/文件缓存/file.cache.php&#39;</span>;
$BLADE <span style="color:#f92672">=</span> <span style="color:#e6db74">&#39;file/文件缓存/file.blade.php&#39;</span>;

<span style="color:#66d9ef">if</span> (<span style="color:#a6e22e">is_file</span>($CACHE) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">filemtime</span>($CACHE) <span style="color:#f92672">&gt;</span> <span style="color:#a6e22e">time</span>() <span style="color:#f92672">-</span> <span style="color:#ae81ff">10</span>) {
    <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#39;is cache...&#39;</span>;
    <span style="color:#66d9ef">include</span> $CACHE;
} <span style="color:#66d9ef">else</span> {
    <span style="color:#a6e22e">ob_start</span>();
    <span style="color:#66d9ef">include</span> $BLADE;
    $content <span style="color:#f92672">=</span> <span style="color:#a6e22e">ob_get_contents</span>();
    <span style="color:#a6e22e">file_put_contents</span>($CACHE, $content);
}
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<p><strong>[3] 利用var_export()快速生成配置文件</strong></p>
<p>::: tip</p>
<p>var_export 类似于 var_dump，当其第二个参数为TRUE时，会返回一个变量，而不是输出它</p>
<p>:::</p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
$db <span style="color:#f92672">=</span> [<span style="color:#e6db74">&#34;host&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;localhost&#34;</span>, <span style="color:#e6db74">&#34;port&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#ae81ff">2000</span>, <span style="color:#e6db74">&#34;pwd&#34;</span> <span style="color:#f92672">=&gt;</span> <span style="color:#e6db74">&#34;admin888&#34;</span>];
<span style="color:#75715e">//不带true会输出符合php语法的数组
</span><span style="color:#75715e"></span>$config <span style="color:#f92672">=</span> <span style="color:#a6e22e">var_export</span>($db, <span style="color:#66d9ef">true</span>);

<span style="color:#a6e22e">file_put_contents</span>(<span style="color:#e6db74">&#39;file/var_export_config.php&#39;</span>, <span style="color:#e6db74">&#34;&lt;?php return &#34;</span> <span style="color:#f92672">.</span> $config <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;;&#34;</span>);
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<p><strong>[4] 统计目录大小</strong></p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#e6db74">/**统计目录大小
</span><span style="color:#e6db74"> * @param string $dir
</span><span style="color:#e6db74"> * @return int
</span><span style="color:#e6db74"> */</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">dir_size</span>(<span style="color:#a6e22e">string</span> $dir <span style="color:#f92672">=</span> <span style="color:#e6db74">&#34;.&#34;</span>)<span style="color:#f92672">:</span> <span style="color:#a6e22e">int</span>
{
    $size <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span>;
    <span style="color:#66d9ef">foreach</span> (<span style="color:#a6e22e">glob</span>($dir <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/*&#34;</span>) <span style="color:#66d9ef">as</span> $file) {
        $size <span style="color:#f92672">+=</span> <span style="color:#a6e22e">is_file</span>($file)<span style="color:#f92672">?</span><span style="color:#a6e22e">filesize</span>($file)<span style="color:#f92672">:</span><span style="color:#a6e22e">dir_size</span>($file);
    }
    <span style="color:#66d9ef">return</span> $size;
}
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<p><strong>[5] 递归复制整体目录</strong></p>
<p>:::details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#e6db74">/**递归复制整体目录
</span><span style="color:#e6db74"> * @param string $from
</span><span style="color:#e6db74"> * @param string $to
</span><span style="color:#e6db74"> * @return bool
</span><span style="color:#e6db74"> */</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">copy_dir</span>(<span style="color:#a6e22e">string</span> $from, <span style="color:#a6e22e">string</span> $to)<span style="color:#f92672">:</span> <span style="color:#a6e22e">bool</span>
{
    <span style="color:#f92672">!</span><span style="color:#a6e22e">is_dir</span>($to) <span style="color:#f92672">&amp;&amp;</span> <span style="color:#a6e22e">mkdir</span>($to, <span style="color:#ae81ff">0755</span>, <span style="color:#66d9ef">true</span>);
    <span style="color:#66d9ef">foreach</span> (<span style="color:#a6e22e">glob</span>($from <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/*&#34;</span>) <span style="color:#66d9ef">as</span> $file) {
        $target <span style="color:#f92672">=</span> $to <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/&#34;</span> <span style="color:#f92672">.</span> <span style="color:#a6e22e">basename</span>($file);
        <span style="color:#a6e22e">is_file</span>($file)
            <span style="color:#f92672">?</span> <span style="color:#a6e22e">copy</span>($file, $target)
            <span style="color:#f92672">:</span> <span style="color:#a6e22e">copy_dir</span>($file, $target);
    };
    <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
}
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<p><strong>[6] 删除多级目录</strong></p>
<p>::: danger</p>
<p>目录的删除操作一定要小心！避免目录层级错误导致的误删</p>
<p>:::</p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#e6db74">/**删除多级目录
</span><span style="color:#e6db74"> * 千万小心！！！
</span><span style="color:#e6db74"> * @param string $dir
</span><span style="color:#e6db74"> * @return bool
</span><span style="color:#e6db74"> */</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">del_dir</span>(<span style="color:#a6e22e">string</span> $dir)
{
    <span style="color:#66d9ef">if</span> (<span style="color:#f92672">!</span><span style="color:#a6e22e">is_dir</span>($dir)) {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">true</span>;
    }
    <span style="color:#66d9ef">foreach</span> (<span style="color:#a6e22e">glob</span>($dir <span style="color:#f92672">.</span> <span style="color:#e6db74">&#34;/*&#34;</span>) <span style="color:#66d9ef">as</span> $file) {
        <span style="color:#a6e22e">is_file</span>($file) <span style="color:#f92672">?</span> <span style="color:#a6e22e">unlink</span>($file) <span style="color:#f92672">:</span> <span style="color:#a6e22e">del_dir</span>($file);
    }
    <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">rmdir</span>($dir);
}
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<p>::: tip</p>
<p><strong>目录的移动</strong> 等价于复制+删除</p>
<p>:::</p>
<h2 id="命名空间">命名空间<a hidden class="anchor" aria-hidden="true" href="#命名空间">#</a></h2>
<blockquote>
<p>在电脑的文件系统中，fin.txt这个文件在一个文件夹下不能同时存在两份，只能另建文件夹将二者分开，这就类似命名空间的概念，利用命名空间可以将类，函数或者常量的同名者分隔开来，避免产生冲突</p>
</blockquote>
<h3 id="几个关键字">几个关键字<a hidden class="anchor" aria-hidden="true" href="#几个关键字">#</a></h3>
<h4 id="1-namespace">1. namespace<a hidden class="anchor" aria-hidden="true" href="#1-namespace">#</a></h4>
<p>用<code>namespace</code>关键字声明一个类的命名空间，如果当做文件系统来看就是讲文件放到某个确定的位置，可以通过层级的文件夹路径找到。</p>
<p>::: tip</p>
<p>标准规范就是，类的命名空间与其所处文件夹名对应</p>
<p>:::</p>
<p>::: danger</p>
<p>namespace之前的代码都不会执行！</p>
<p>:::</p>
<h4 id="2use">2.use<a hidden class="anchor" aria-hidden="true" href="#2use">#</a></h4>
<p>use关键字导入声明了命名空间的类等，所有支持命名空间的PHP版本支持三种别名或导入方式：为类名称使用别名、为接口使用别名或为命名空间名称使用别名。PHP 5.6开始允许导入函数或常量或者为它们设置别名。</p>
<p>具体方法：</p>
<p>::: details</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">namespace</span> <span style="color:#a6e22e">foo</span>;
<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">My\Full\Classname</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">Another</span>;

<span style="color:#75715e">// 下面的例子与 use My\Full\NSname as NSname 相同
</span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> <span style="color:#a6e22e">My\Full\NSname</span>;

<span style="color:#75715e">// 导入一个全局类
</span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> <span style="color:#a6e22e">ArrayObject</span>;

<span style="color:#75715e">// importing a function (PHP 5.6+)
</span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">My\Full\functionName</span>;

<span style="color:#75715e">// aliasing a function (PHP 5.6+)
</span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">My\Full\functionName</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">func</span>;

<span style="color:#75715e">// importing a constant (PHP 5.6+)
</span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">My\Full\CONSTANT</span>;
</code></pre></td></tr></table>
</div>
</div><p>:::</p>
<h4 id="3自动加载">3.自动加载<a hidden class="anchor" aria-hidden="true" href="#3自动加载">#</a></h4>
<p>::: tip</p>
<p>如果两个类定义在不同的php文件中，使用use声明命名空间或者类之后，还需要用include/require引入进来，略微有点麻烦，我们希望有种自动处理的方法，使得我们只需要使用use声明，而include自动完成！</p>
<p>:::</p>
<p><strong>方法1 函数实现</strong></p>
<p><code>spl_autoload_register()</code> 函数当使用use声明的命名空间类不存在时，会，自动调用该函数</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
<span style="color:#66d9ef">namespace</span> <span style="color:#a6e22e">App</span>;

<span style="color:#a6e22e">spl_autoload_register</span>(
    <span style="color:#66d9ef">function</span> ($name) {
        $file <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_replace</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;/&#34;</span>, $name)<span style="color:#f92672">.</span><span style="color:#e6db74">&#34;.php&#34;</span>;
        <span style="color:#66d9ef">require</span> $file;
    }
);

<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">App\Module\Shop\Server\Member</span>;
<span style="color:#a6e22e">Member</span><span style="color:#f92672">::</span><span style="color:#a6e22e">show</span>();
</code></pre></td></tr></table>
</div>
</div><p><strong>方法2 面向对象形式</strong></p>
<p>::: warning</p>
<p>自动加载类需要与使用者在同一命名空间下，或者使用use&amp;include正确引入</p>
<p>:::</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//Autoload.php类
</span><span style="color:#75715e"></span><span style="color:#66d9ef">namespace</span> <span style="color:#a6e22e">App</span>;

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Autoload</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">boot</span>()
    {
        <span style="color:#a6e22e">spl_autoload_register</span>([<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">self</span>, <span style="color:#e6db74">&#34;autoload&#34;</span>]);<span style="color:#75715e">//注意传参方式
</span><span style="color:#75715e"></span>    }
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">autoload</span>($name)
    {
        $file <span style="color:#f92672">=</span> <span style="color:#a6e22e">str_replace</span>(<span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\\</span><span style="color:#e6db74">&#34;</span>, <span style="color:#e6db74">&#34;/&#34;</span>, $name)<span style="color:#f92672">.</span><span style="color:#e6db74">&#34;.php&#34;</span>;
        <span style="color:#66d9ef">require</span> $file;
    }
}

<span style="color:#a6e22e">Autoload</span><span style="color:#f92672">::</span><span style="color:#a6e22e">boot</span>();<span style="color:#75715e">//自动调用静态方法，引入之后不需调用
</span></code></pre></td></tr></table>
</div>
</div><div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//use.php
</span><span style="color:#75715e"></span><span style="color:#66d9ef">namespace</span> <span style="color:#a6e22e">App</span>;
<span style="color:#66d9ef">include</span> <span style="color:#e6db74">&#34;Autoload.php&#34;</span>;
<span style="color:#66d9ef">use</span> <span style="color:#a6e22e">App\Module\Shop\Server\Member</span>;

<span style="color:#a6e22e">Member</span><span style="color:#f92672">::</span><span style="color:#a6e22e">show</span>();
</code></pre></td></tr></table>
</div>
</div><p><strong>方法3 第三方工具—composer</strong></p>
<p>初始化</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">composer init
</code></pre></td></tr></table>
</div>
</div><p>修改配置</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-json" data-lang="json"><span style="color:#e6db74">&#34;autoload&#34;</span><span style="color:#960050;background-color:#1e0010">:</span>{
    <span style="color:#f92672">&#34;psr-4&#34;</span>:{
    <span style="color:#f92672">&#34;App\\&#34;</span>:<span style="color:#e6db74">&#34;App&#34;</span>
    }
}
</code></pre></td></tr></table>
</div>
</div><p>构建</p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-sh" data-lang="sh">conposer build
</code></pre></td></tr></table>
</div>
</div><p>然后引入生成的vendor文件夹下的autoload.php即可！</p>
<h2 id="面向对象">面向对象<a hidden class="anchor" aria-hidden="true" href="#面向对象">#</a></h2>
<blockquote>
<p>使用类的方式实现某一功能，通过继承让代码变得更易维护</p>
</blockquote>
<h3 id="类中的量方法">类中的量&amp;方法<a hidden class="anchor" aria-hidden="true" href="#类中的量方法">#</a></h3>
<h4 id="静态变量方法">静态变量&amp;方法<a hidden class="anchor" aria-hidden="true" href="#静态变量方法">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">User</span>{
    <span style="color:#66d9ef">protected</span> <span style="color:#66d9ef">static</span> $name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;fin&#34;</span>;
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">static</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>(){
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">self</span><span style="color:#f92672">::</span>$name;<span style="color:#75715e">//self 关键字表示当前对象，
</span><span style="color:#75715e"></span>    }
}
$u<span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> <span style="color:#a6e22e">User</span>();
<span style="color:#66d9ef">echo</span> $u<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">show</span>();
<span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">User</span><span style="color:#f92672">::</span><span style="color:#a6e22e">show</span>();
</code></pre></td></tr></table>
</div>
</div><p>静态方法/属性通过<code>类名::方法/属性</code>的方式调用</p>
<h4 id="常量">常量<a hidden class="anchor" aria-hidden="true" href="#常量">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Model</span>
{
    <span style="color:#66d9ef">const</span> <span style="color:#66d9ef">EXISTS_VALUE</span><span style="color:#f92672">=</span><span style="color:#ae81ff">1</span>;
}
<span style="color:#66d9ef">echo</span> <span style="color:#a6e22e">Model</span><span style="color:#f92672">::</span><span style="color:#a6e22e">EXISTS_VALUE</span>;
$m<span style="color:#f92672">=</span><span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Model</span>();
<span style="color:#66d9ef">echo</span> $m<span style="color:#f92672">::</span><span style="color:#a6e22e">EXISTS_VALUE</span>;
</code></pre></td></tr></table>
</div>
</div><ul>
<li>
<p>常量名规范上全部大写</p>
</li>
<li>
<p>常量永远不会被改变</p>
</li>
</ul>
<h4 id="privateprotect的区别">private&amp;protect的区别<a hidden class="anchor" aria-hidden="true" href="#privateprotect的区别">#</a></h4>
<p><strong>主要区别在继承上：</strong></p>
<ul>
<li><code>protect</code>定义的方法，继承后能在子类中直接访问</li>
<li><code>private</code>只供当前对象使用，继承后的子类无法访问</li>
</ul>
<h4 id="构造函数与解析函数魔术方法">构造函数与解析函数(魔术方法)<a hidden class="anchor" aria-hidden="true" href="#构造函数与解析函数魔术方法">#</a></h4>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Test</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> __construct()
    {
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;__construct&#34;</span>;
    }

    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> __destruct()
    {
        <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;__destruct&#34;</span>;
    }
  <span style="color:#75715e">/*  public function __run()
</span><span style="color:#75715e">    {
</span><span style="color:#75715e">        echo &#34;__run&#34;;
</span><span style="color:#75715e">    }*/</span>
}

<span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Test</span>();
</code></pre></td></tr></table>
</div>
</div><p><strong>说明：</strong></p>
<ul>
<li>两者都会在new对象的时候自动执行</li>
<li>名称不可以自定义</li>
<li>前者一般用来赋值操作，后者做一些资源的释放等</li>
</ul>
<h3 id="继承特殊类">继承&amp;特殊类<a hidden class="anchor" aria-hidden="true" href="#继承特殊类">#</a></h3>
<h4 id="单链式继承">单链式继承<a hidden class="anchor" aria-hidden="true" href="#单链式继承">#</a></h4>
<blockquote>
<p>用到<code>extends</code>关键字</p>
</blockquote>
<p>🎈<strong>防止继承后子类覆盖父类方法</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">9
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Father</span>{
    <span style="color:#66d9ef">private</span> <span style="color:#66d9ef">static</span> $name<span style="color:#f92672">=</span><span style="color:#e6db74">&#34;jqf&#34;</span>;
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">final</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>(){
        <span style="color:#66d9ef">return</span> <span style="color:#a6e22e">Father</span><span style="color:#f92672">::</span>$name;
    }
}
<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Child</span> <span style="color:#66d9ef">extends</span> <span style="color:#a6e22e">Father</span>{
<span style="color:#75715e">//    public function show(){}//Cannot override final method
</span><span style="color:#75715e"></span>}
</code></pre></td></tr></table>
</div>
</div><p>利用<code>final</code>关键字定义父类中的方法，就可以避免父类方法被重写</p>
<h4 id="多继承">多继承<a hidden class="anchor" aria-hidden="true" href="#多继承">#</a></h4>
<blockquote>
<p>用<code>trait</code> 关键字定义类，用<code>use</code>引入</p>
</blockquote>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">12
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">13
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">14
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">15
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">16
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">17
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">18
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">19
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">20
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">21
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">22
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">23
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">24
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">25
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">26
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">27
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>

<span style="color:#66d9ef">trait</span> <span style="color:#a6e22e">Commit</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">publish</span>()
    {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">__METHOD__</span>;
    }
}

<span style="color:#66d9ef">trait</span> <span style="color:#a6e22e">Log</span>
{
    <span style="color:#66d9ef">public</span> <span style="color:#66d9ef">function</span> <span style="color:#a6e22e">show</span>()
    {
        <span style="color:#66d9ef">return</span> <span style="color:#66d9ef">__METHOD__</span>;
    }
}

<span style="color:#66d9ef">class</span> <span style="color:#a6e22e">Topic</span>
{
    <span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Commit</span>, <span style="color:#a6e22e">Log</span>;
}

$topic <span style="color:#f92672">=</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Topic</span>;
<span style="color:#66d9ef">echo</span> $topic<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">publish</span>();
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;&lt;hr&gt;&#34;</span>;
<span style="color:#66d9ef">echo</span> $topic<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">show</span>();
</code></pre></td></tr></table>
</div>
</div><p>🎈 <strong>多继承后的优先级</strong></p>
<p>当继承后方法名重复时，优先级为:<code>子类方法 &gt; trait &gt; extend</code></p>
<p>🎈 <strong>多继承方法名冲突问题</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">5
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//类中方法名冲突，通过替换+改名解决
</span><span style="color:#75715e"></span><span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Commit</span>, <span style="color:#a6e22e">Log</span>{
    <span style="color:#a6e22e">Commit</span><span style="color:#f92672">::</span><span style="color:#a6e22e">show</span> <span style="color:#a6e22e">insteadof</span>  <span style="color:#a6e22e">Log</span>;<span style="color:#75715e">//设置优先级
</span><span style="color:#75715e"></span>    <span style="color:#a6e22e">Log</span><span style="color:#f92672">::</span><span style="color:#a6e22e">show</span> <span style="color:#66d9ef">as</span> <span style="color:#a6e22e">export</span>;<span style="color:#75715e">//优先级低的改名
</span><span style="color:#75715e"></span>}
</code></pre></td></tr></table>
</div>
</div><p>设置优先级→优先级低的改名</p>
<p>🎈 <strong>重新定义父类方法的访问权限</strong></p>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">3
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#66d9ef">use</span> <span style="color:#a6e22e">Commit</span>{
    <span style="color:#a6e22e">Commit</span><span style="color:#f92672">::</span><span style="color:#a6e22e">publish</span> <span style="color:#66d9ef">as</span> <span style="color:#66d9ef">protected</span>;
}
</code></pre></td></tr></table>
</div>
</div><p><code>protect</code>与<code>public</code>之间相互转换</p>
<h4 id="特殊类">特殊类<a hidden class="anchor" aria-hidden="true" href="#特殊类">#</a></h4>
<table>
<thead>
<tr>
<th>特殊类</th>
<th>使用</th>
<th>说明</th>
</tr>
</thead>
<tbody>
<tr>
<td>抽象类</td>
<td><code>abstract</code></td>
<td>子类必须实现其中声明的抽象方法</td>
</tr>
<tr>
<td>接口</td>
<td><code>interface</code></td>
<td>类似一个标准,凡是通过 <code>implements</code> 关键字使用该接口的类，必须实现其中的所有方法</td>
</tr>
<tr>
<td>特征类</td>
<td><code>trait</code></td>
<td>定义类用于多继承</td>
</tr>
</tbody>
</table>
<h3 id="魔术方法">魔术方法<a hidden class="anchor" aria-hidden="true" href="#魔术方法">#</a></h3>
<blockquote>
<p>魔术方法定义在父类当中，由子类触发</p>
</blockquote>
<h4 id="属性相关">属性相关<a hidden class="anchor" aria-hidden="true" href="#属性相关">#</a></h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>调用条件</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__get($name)</code></td>
<td>获取对象中的<strong>不可访问或不存在</strong>的变量时会自动调用</td>
</tr>
<tr>
<td><code>__set($name,$value)</code></td>
<td>给对象设置<strong>不可访问</strong>值会自动调用</td>
</tr>
<tr>
<td><code>__unset($name)</code></td>
<td>删除对象中的<strong>不可访问或不存在</strong>变量会调用</td>
</tr>
<tr>
<td><code>__isset($name)</code></td>
<td>判断对象中是否存在某变量调用</td>
</tr>
</tbody>
</table>
<h4 id="方法相关">方法相关<a hidden class="anchor" aria-hidden="true" href="#方法相关">#</a></h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>调用条件</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__call($name, $arguments)</code></td>
<td>子类实例化调用的方法在子类中不存在时</td>
</tr>
<tr>
<td><code>__callStatic($name,$arguments)</code></td>
<td>子类静态方法不存在时</td>
</tr>
</tbody>
</table>
<h4 id="特殊">特殊<a hidden class="anchor" aria-hidden="true" href="#特殊">#</a></h4>
<table>
<thead>
<tr>
<th>方法</th>
<th>调用条件</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>__construct()</code></td>
<td><code>new</code> 即调用</td>
</tr>
<tr>
<td><code>__destruct()</code></td>
<td><code>new</code> 即调用</td>
</tr>
<tr>
<td><code>__toString</code></td>
<td>直接输出对象引用，不会产生错误，自动调用该方法,输出该方法中返回的字符串</td>
</tr>
</tbody>
</table>
<h2 id="错误异常处理">错误&amp;异常处理<a hidden class="anchor" aria-hidden="true" href="#错误异常处理">#</a></h2>
<h3 id="错误">错误<a hidden class="anchor" aria-hidden="true" href="#错误">#</a></h3>
<blockquote>
<p>通过<code>error_reporting(0)</code>屏蔽系统默认的所有错误处理，然后通过<code>set_error_handler</code>设置自定义错误处理函数，第一个参数为函数，第二个为要处理的错误，默认为处理所有错误(E_ALL | E_STRICT),[<a href="https://www.php.net/manual/zh/function.set-error-handler.php">官网</a>]</p>
</blockquote>
<h4 id="错误处理函数的参数">错误处理函数的参数<a hidden class="anchor" aria-hidden="true" href="#错误处理函数的参数">#</a></h4>
<table>
<thead>
<tr>
<th>参数</th>
<th>是否可选(Y/N)</th>
<th>作用</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>$errcode</code></td>
<td>N</td>
<td>是一个 integer，包含了错误的级别(<a href="https://www.php.net/manual/zh/errorfunc.constants.php">错误码</a>)</td>
</tr>
<tr>
<td><code>$errmsg</code></td>
<td>N</td>
<td>是一个string，包含了错误的信息</td>
</tr>
<tr>
<td><code>$errfile</code></td>
<td>Y</td>
<td>是一个string，包含了发生错误的文件名</td>
</tr>
<tr>
<td><code>$errline</code></td>
<td>Y</td>
<td>是一个 integer，包含了错误发生的行号</td>
</tr>
</tbody>
</table>
<blockquote>
<p>然后通过<code>error_log</code>函数选择将错误相关的信息发送到某个地方</p>
</blockquote>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">1
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#a6e22e">error_log</span> ( <span style="color:#a6e22e">string</span> $message [, <span style="color:#a6e22e">int</span> $message_type <span style="color:#f92672">=</span> <span style="color:#ae81ff">0</span> [, <span style="color:#a6e22e">string</span> $destination [, <span style="color:#a6e22e">string</span> $extra_headers ]]] ) <span style="color:#f92672">:</span> <span style="color:#a6e22e">bool</span>
</code></pre></td></tr></table>
</div>
</div><table>
<thead>
<tr>
<th>message_type</th>
<th>操作</th>
</tr>
</thead>
<tbody>
<tr>
<td>0</td>
<td><code>message</code> 发送到 PHP 的系统日志，使用 操作系统的日志机制或者一个文件，取决于 <a href="https://www.php.net/manual/zh/errorfunc.configuration.php#ini.error-log">error_log</a> 指令设置了什么。 这是个默认的选项。</td>
</tr>
<tr>
<td>1</td>
<td><code>message</code> 发送到参数 <code>destination</code> 设置的邮件地址。 第四个参数 <code>extra_headers</code> 只有在这个类型里才会被用到。</td>
</tr>
<tr>
<td>2</td>
<td>不再是一个选项。</td>
</tr>
<tr>
<td>3</td>
<td><code>message</code> 被发送到位置为 <code>destination</code> 的文件里。 字符 <code>message</code> 不会默认被当做新的一行。</td>
</tr>
<tr>
<td>4</td>
<td><code>message</code> 直接发送到 SAPI 的日志处理程序中。</td>
</tr>
</tbody>
</table>
<h3 id="异常">异常<a hidden class="anchor" aria-hidden="true" href="#异常">#</a></h3>
<blockquote>
<p>异常处理不同于错误，异常必须是使用<code>throw</code> 抛出异常，然后才能被<code>try catch</code> 捕获</p>
</blockquote>
<h4 id="自定义异常的处理">自定义异常的处理<a hidden class="anchor" aria-hidden="true" href="#自定义异常的处理">#</a></h4>
<h5 id="依赖方法">依赖方法<a hidden class="anchor" aria-hidden="true" href="#依赖方法">#</a></h5>
<p>👉 <code>set_exception_handler</code> [<a href="https://www.php.net/manual/zh/function.set-exception-handler.php">官网</a>]</p>
<blockquote>
<p>设置用户自定义的异常处理函数</p>
</blockquote>
<div class="highlight"><div style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4">
<table style="border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block;"><tr><td style="vertical-align:top;padding:0;margin:0;border:0;">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 1
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 2
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 3
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 4
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 5
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 6
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 7
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 8
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f"> 9
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">10
</span><span style="margin-right:0.4em;padding:0 0.4em 0 0.4em;color:#7f7f7f">11
</span></code></pre></td>
<td style="vertical-align:top;padding:0;margin:0;border:0;;width:100%">
<pre tabindex="0" style="color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4"><code class="language-php" data-lang="php"><span style="color:#75715e">//范例
</span><span style="color:#75715e"></span><span style="color:#f92672">&lt;?</span><span style="color:#a6e22e">php</span>
<span style="color:#66d9ef">function</span> <span style="color:#a6e22e">exception_handler</span>($exception) {
  <span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;Uncaught exception: &#34;</span> , $exception<span style="color:#f92672">-&gt;</span><span style="color:#a6e22e">getMessage</span>(), <span style="color:#e6db74">&#34;</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
}

<span style="color:#a6e22e">set_exception_handler</span>(<span style="color:#e6db74">&#39;exception_handler&#39;</span>);

<span style="color:#66d9ef">throw</span> <span style="color:#66d9ef">new</span> <span style="color:#a6e22e">Exception</span>(<span style="color:#e6db74">&#39;Uncaught Exception&#39;</span>);
<span style="color:#66d9ef">echo</span> <span style="color:#e6db74">&#34;Not Executed</span><span style="color:#ae81ff">\n</span><span style="color:#e6db74">&#34;</span>;
<span style="color:#75715e">?&gt;</span><span style="color:#960050;background-color:#1e0010">
</span></code></pre></td></tr></table>
</div>
</div><p>在<code>exception_handler</code>可以接收到产生异常后的异常处理类，如果没有自定义异常处理类，默认为<code>Exception</code>类</p>
<h5 id="基本思路">基本思路<a hidden class="anchor" aria-hidden="true" href="#基本思路">#</a></h5>
<blockquote>
<p>自定义继承自<code>Exception</code>的异常处理的类，让其中默认存在<code>render()</code> 处理函数(用来区分默认的异常处理类<code>Exception</code>)</p>
</blockquote>
<blockquote>
<p>定义异常监测类，其作用为执行<code>set_exception_handler</code>，然后在其设置的<code>exception_handler</code>函数中做判断：🎈如果该函数接受的参数(异常处理类)中存在<code>render()</code>函数，则该异常由自定义的异常处理类抛出，调用该异常处理类的<code>render()</code> 函数即可；🎈如果不存在<code>render()</code>函数，说明该异常没有自定义的异常处理类(是通过<code>throw new Exceprtion()</code> 抛出的异常)，再做处理即可；</p>
</blockquote>
<blockquote>
<p>然后定义具体逻辑，在具体位置判断需要抛出哪种异常即可。</p>
</blockquote>
<h4 id="本例实现思路">本例实现思路<a hidden class="anchor" aria-hidden="true" href="#本例实现思路">#</a></h4>
<blockquote>
<p>本例主要实现两个模块，视图渲染+表单验证</p>
</blockquote>
<h5 id="-视图渲染">⚔ 视图渲染<a hidden class="anchor" aria-hidden="true" href="#-视图渲染">#</a></h5>
<blockquote>
<p>主要作用是加载位于<code>Views</code>文件夹下的每个页面</p>
</blockquote>
<p><strong>主要逻辑</strong></p>
<blockquote>
<p>在入口文件<code>index.php</code>中引入定义在<code>bootstrap.php</code> 中的<code>composer</code>自动加载功能(使用use引入类，会自动调用include)，以及异常监测类。其中，异常检测类中的<code>set_exception_handler</code>自动执行</p>
</blockquote>
<blockquote>
<p>然后使用<code>Server\View</code>视图渲染类的<code>make</code>方法加载<code>Views</code> 下的<code>index.blade.php</code>文件。存在，则通过<code>include</code>引入，如果不存在会抛出<code>ViewException</code>异常</p>
</blockquote>
<blockquote>
<p>一旦抛出<code>ViewException</code>异常，就会通过<code>View</code>类的<code>make</code>方法加载<code>error.blade.php</code>，这个文件一定是要存在的</p>
</blockquote>
<h5 id="-表单验证">⚔ 表单验证<a hidden class="anchor" aria-hidden="true" href="#-表单验证">#</a></h5>
<blockquote>
<p>提交表单到后台，通过验证类判断是否能通过验证，不能通过则携带着提示信息返回表单页面，能通过则加载成功的页面</p>
</blockquote>
<p><strong>主要逻辑</strong></p>
<blockquote>
<p>视图渲染模块无异常后会转到<code>index.blade.php</code>页面，其中含有展示在前端的表单，提交至<code>controller.php</code></p>
</blockquote>
<blockquote>
<p><code>controller.php</code> 也需要引入<code>bootstrap.php</code> ，然后通过表单验证类<code>Server\ValidateException</code>进行验证。无异常执行下一句，即通过<code>View</code> 类加载成功页面<code>success.blade.php</code>.否则：</p>
</blockquote>
<blockquote>
<p>表单验证类<code>Server\ValidateException.php</code>中判断<code>$_POST</code>的内容，本例只判断是否为空，如果为空抛出表单验证异常<code>ValidateException</code>，<code>controller.php</code>中的后续不再执行</p>
</blockquote>
<blockquote>
<p>一旦抛出<code>ValidateException</code>表单验证异常，会将<code>ValidateException.php</code>中抛出异常时的消息存到SESSION中，然后通过<code>header(&quot;location:index.php&quot;)</code>返回入口文件路径，即重新开始输入表单。在表单中可以把存放在SESSION中的异常消息展示给用户作为提示。</p>
</blockquote>


  </div>

  <footer class="post-footer">
    <ul class="post-tags">
      <li><a href="https://www.fintinger.site/tags/php/">PHP</a></li>
    </ul>
<nav class="paginav">
  <a class="next" href="https://www.fintinger.site/p/es6%E4%B9%8Bpromise%E7%94%A8%E6%B3%95%E5%B0%8F%E7%BB%93/">
    <span class="title">Next Page »</span>
    <br>
    <span>ES6之Promise用法小结</span>
  </a>
</nav>

  </footer><script src='//cdn.jsdelivr.net/npm/@waline/client/dist/Waline.min.js'></script>
<div id="waline" class="waline-container"></div>
<style>
    .waline-container {
        background-color: var(--card-background);
        border-radius: var(--card-border-radius);
        box-shadow: var(--shadow-l1);
        padding: var(--card-padding);
    }
    .waline-container .vcount {
        color: var(--card-text-color-main);
    }
</style><script>
    
    new Waline({"avatar":"robohash","dark":"html[data-scheme=\"dark\"]","el":"#waline","emoji":["https://cdn.jsdelivr.net/gh/walinejs/emojis/weibo","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/bilibili","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/qq","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tieba","https://cdn.jsdelivr.net/gh/walinejs/emojis@1.0.0/tw-emoji"],"highlight":true,"locale":{"admin":"Admin"},"placeholder":"说点什么༼ つ ◕_◕ ༽つ","requiredMeta":["name","email","url"],"serverURL":"https://waline-q3l7of5hj-fintinger.vercel.app/","visitor":true});
</script>
</article>
    </main>
    
<footer class="footer">
    <span>&copy; 2022 <a href="https://www.fintinger.site">Archai&#39;s home</a></span>
    <span>
        Powered by
        <a href="https://gohugo.io/" rel="noopener noreferrer" target="_blank">Hugo</a> &
        <a href="https://git.io/hugopapermod" rel="noopener" target="_blank">PaperMod</a>
    </span>
</footer>
<a href="#top" aria-label="go to top" title="Go to Top (Alt + G)" class="top-link" id="top-link" accesskey="g">
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentColor">
        <path d="M12 6H0l6-6z" />
    </svg>
</a>

<script>
    let menu = document.getElementById('menu')
    if (menu) {
        menu.scrollLeft = localStorage.getItem("menu-scroll-position");
        menu.onscroll = function () {
            localStorage.setItem("menu-scroll-position", menu.scrollLeft);
        }
    }

    document.querySelectorAll('a[href^="#"]').forEach(anchor => {
        anchor.addEventListener("click", function (e) {
            e.preventDefault();
            var id = this.getAttribute("href").substr(1);
            if (!window.matchMedia('(prefers-reduced-motion: reduce)').matches) {
                if (id === "top") {
                document.body.scrollIntoView({
                    behavior: "smooth"
                })
                return true;
            }
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView({
                    behavior: "smooth"
                });
            } else {
                document.querySelector(`[id='${decodeURIComponent(id)}']`).scrollIntoView();
            }
            if (id === "top") {
                document.body.scrollIntoView({
                    behavior: "smooth"
                })
                history.replaceState(null, null, " ");
            } else {
                history.pushState(null, null, `#${id}`);
            }
        });
    });
window.onerror=function(){return true;}
</script>
<script>
    var mybutton = document.getElementById("top-link");
    window.onscroll = function () {
        if (document.body.scrollTop > 800 || document.documentElement.scrollTop > 800) {
            mybutton.style.visibility = "visible";
            mybutton.style.opacity = "1";
        } else {
            mybutton.style.visibility = "hidden";
            mybutton.style.opacity = "0";
        }
    };

</script>
<script>
    document.querySelectorAll('pre > code').forEach((codeblock) => {
        const container = codeblock.parentNode.parentNode;

        const copybutton = document.createElement('button');
        copybutton.classList.add('copy-code');
        copybutton.innerText = 'copy';

        function copyingDone() {
            copybutton.innerText = 'copied!';
            setTimeout(() => {
                copybutton.innerText = 'copy';
            }, 2000);
        }

        copybutton.addEventListener('click', (cb) => {
            if ('clipboard' in navigator) {
                navigator.clipboard.writeText(codeblock.textContent);
                copyingDone();
                return;
            }

            const range = document.createRange();
            range.selectNodeContents(codeblock);
            const selection = window.getSelection();
            selection.removeAllRanges();
            selection.addRange(range);
            try {
                document.execCommand('copy');
                copyingDone();
            } catch (e) { };
            selection.removeRange(range);
        });

        if (container.classList.contains("highlight")) {
            container.appendChild(copybutton);
        } else if (container.parentNode.firstChild == container) {
            
        } else if (codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName == "TABLE") {
            
            codeblock.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(copybutton);
        } else {
            
            codeblock.parentNode.appendChild(copybutton);
        }
    });
</script>
<video id="liveBgBox" autoplay="" loop="true" muted="" src="" style="display: none;"></video>
</body>
<script>
    
    window.onload = function () {
        vid.src = "https://jqf.oss-cn-beijing.aliyuncs.com/videos/7kgkoysahpw31.mp4"
        vid.play();
    }

    let vid = document.getElementById("liveBgBox");
    let profile = document.getElementsByClassName("profile")[0];
    if (profile) {
        vid.style.display = "block";
        window.document.body.style.background="url('https://jqf.oss-cn-beijing.aliyuncs.com/images/poster1.png') no-repeat  center/cover fixed";
    }

</script>

</html>